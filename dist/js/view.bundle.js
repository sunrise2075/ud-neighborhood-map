function initMap(){map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:INIT_ZOOM_NUM,center:center.location}),map.setOptions({styles:styles});var e=[];geoLocations.forEach(function(o){var t=new google.maps.Marker({position:o.location,map:map,title:o.title,icon:{url:o.icon}});t.addListener("click",function(){t.setAnimation(4),openInfoWindow(t)}),e.push(t)}),initKoViewModel4App(e)}function openInfoWindow(e){function o(o,t){if(t==google.maps.StreetViewStatus.OK){var n=o.location.latLng,i=google.maps.geometry.spherical.computeHeading(n,e.position);infowindow.setContent("<div>"+e.title+'</div><div id="pano"></div>');var a={position:n,pov:{heading:i,pitch:30}};new google.maps.StreetViewPanorama(document.getElementById("pano"),a)}else infoWindow.setContent("<div>"+e.title+"</div><div>No Street View Found</div>")}infoWindow?infoWindow.marker=e:(infoWindow=new google.maps.InfoWindow({position:e.getPosition(),maxWidth:350}),infoWindow.addListener("closeclick",function(){infoWindow.marker=null})),infoWindow.setContent(""),infoWindow.marker=e;var t=new google.maps.StreetViewService,n=50;t.getPanoramaByLocation(e.position,n,o),infoWindow.open(map,e)}function loadCoffeeShopInfo(e){coffeeShopMarkers.forEach(function(e){e.setMap(null)}),coffeeShopMarkers.length=0;var o="XBEVRWM1JGYOB2WS5LMPM35BJZFAANOTAPEEGNNHQ52BDOXV",t="P1XBXTSAGOKAWMGYIMHOALG1NSBPOJYVZLUAD5RSQEGJ3MN5",n="https://api.foursquare.com/v2/venues/explore?",i="ll="+e.position.lat()+"%2C"+e.position.lng()+"&section=coffee&limit=10&novelty=new",a="&client_id="+o+"&client_secret="+t+"&v=20170308",s=n+i+a;$.ajax({url:s}).done(function(e,o,t){var n=e.response.groups[0].items;console.log(n);for(var i in n){var a=n[i].venue,s=new google.maps.Marker({position:new google.maps.LatLng(a.location.lat,a.location.lng),map:map,title:a.name,icon:{url:"./dist/images/coffee-n-tea.png"}});coffeeShopMarkers.push(s)}}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function zoomIn2Marker(e){map.setCenter(e.getPosition()),map.setZoom(DETAIL_ZOOM_NUM)}function zoomOut2InitStatus(){map.setCenter(center.location),map.setZoom(INIT_ZOOM_NUM)}var styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}],map=null,MY_API_KEY="AIzaSyAyWxuLDi5aIxMGqATA74uLx4huY1uF4hg",infoWindow=null,INIT_ZOOM_NUM=11,DETAIL_ZOOM_NUM=14,coffeeShopMarkers=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC52aWV3LmpzIl0sIm5hbWVzIjpbImluaXRNYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJJTklUX1pPT01fTlVNIiwiY2VudGVyIiwibG9jYXRpb24iLCJzZXRPcHRpb25zIiwic3R5bGVzIiwibWFya2VycyIsImdlb0xvY2F0aW9ucyIsImZvckVhY2giLCJsb2MiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwiaWNvbiIsInVybCIsImFkZExpc3RlbmVyIiwic2V0QW5pbWF0aW9uIiwib3BlbkluZm9XaW5kb3ciLCJwdXNoIiwiaW5pdEtvVmlld01vZGVsNEFwcCIsImdldFN0cmVldFZpZXciLCJkYXRhIiwic3RhdHVzIiwiU3RyZWV0Vmlld1N0YXR1cyIsIk9LIiwibmVhclN0cmVldFZpZXdMb2NhdGlvbiIsImxhdExuZyIsImhlYWRpbmciLCJnZW9tZXRyeSIsInNwaGVyaWNhbCIsImNvbXB1dGVIZWFkaW5nIiwiaW5mb3dpbmRvdyIsInNldENvbnRlbnQiLCJwYW5vcmFtYU9wdGlvbnMiLCJwb3YiLCJwaXRjaCIsIlN0cmVldFZpZXdQYW5vcmFtYSIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiZ2V0UG9zaXRpb24iLCJtYXhXaWR0aCIsInN0cmVldFZpZXdTZXJ2aWNlIiwiU3RyZWV0Vmlld1NlcnZpY2UiLCJyYWRpdXMiLCJnZXRQYW5vcmFtYUJ5TG9jYXRpb24iLCJvcGVuIiwibG9hZENvZmZlZVNob3BJbmZvIiwiY29mZmVlU2hvcE1hcmtlcnMiLCJjb2ZmZWVCYXJNYXJrZXIiLCJzZXRNYXAiLCJsZW5ndGgiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImJhc2VVcmwiLCJxdWVyeVBhcmFtcyIsImxhdCIsImxuZyIsInVzZXJJbmZvIiwiJCIsImFqYXgiLCJkb25lIiwidGV4dFN0YXR1cyIsImpxWGhyIiwiaXRlbXMiLCJyZXNwb25zZSIsImdyb3VwcyIsImNvbnNvbGUiLCJsb2ciLCJpIiwidmVudWUiLCJMYXRMbmciLCJuYW1lIiwiZmFpbCIsImVycm9yVGhyb3duIiwiYWx3YXlzIiwianFYSFJPckRhdGEiLCJqcVhIUk9yRXJyb3JUaHJvd24iLCJ6b29tSW4yTWFya2VyIiwic2V0Q2VudGVyIiwic2V0Wm9vbSIsIkRFVEFJTF9aT09NX05VTSIsInpvb21PdXQySW5pdFN0YXR1cyIsImZlYXR1cmVUeXBlIiwic3R5bGVycyIsImNvbG9yIiwiZWxlbWVudFR5cGUiLCJ3ZWlnaHQiLCJsaWdodG5lc3MiLCJodWUiLCJ2aXNpYmlsaXR5IiwiTVlfQVBJX0tFWSJdLCJtYXBwaW5ncyI6IkFBbUZBLFFBQUFBLFdBQ0FDLElBQUEsR0FBQUMsUUFBQUMsS0FBQUMsSUFBQUMsU0FBQUMsZUFBQSxlQUNBQyxLQUFBQyxjQUNBQyxPQUFBQSxPQUFBQyxXQUVBVCxJQUFBVSxZQUFBQyxPQUFBQSxRQUdBLElBQUFDLEtBQ0FDLGNBQUFDLFFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLEdBQUFmLFFBQUFDLEtBQUFlLFFBQ0FDLFNBQUFILEVBQUFOLFNBQ0FULElBQUFBLElBQ0FtQixNQUFBSixFQUFBSSxNQUNBQyxNQUNBQyxJQUFBTixFQUFBSyxPQUdBSixHQUFBTSxZQUFBLFFBQUEsV0FFQU4sRUFBQU8sYUFBQSxHQUNBQyxlQUFBUixLQUVBSixFQUFBYSxLQUFBVCxLQUlBVSxvQkFBQWQsR0FTQSxRQUFBWSxnQkFBQVIsR0E2QkEsUUFBQVcsR0FBQUMsRUFBQUMsR0FDQSxHQUFBQSxHQUFBNUIsT0FBQUMsS0FBQTRCLGlCQUFBQyxHQUFBLENBQ0EsR0FBQUMsR0FBQUosRUFBQW5CLFNBQUF3QixPQUNBQyxFQUFBakMsT0FBQUMsS0FBQWlDLFNBQUFDLFVBQUFDLGVBQ0FMLEVBQUFoQixFQUFBRSxTQUNBb0IsWUFBQUMsV0FBQSxRQUFBdkIsRUFBQUcsTUFBQSw4QkFDQSxJQUFBcUIsSUFDQXRCLFNBQUFjLEVBQ0FTLEtBQ0FQLFFBQUFBLEVB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dW5yaXNlMjA3NSBvbiAyMDE3LzIvMjYuXHJcbiAqL1xyXG4vLyBDcmVhdGUgYSBzdHlsZXMgYXJyYXkgdG8gdXNlIHdpdGggdGhlIG1hcC5cclxudmFyIHN0eWxlcyA9IFtcclxuICAgIHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjMTlhMGQ4JyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdhZG1pbmlzdHJhdGl2ZScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNmZmZmZmYnIH0sXHJcbiAgICAgICAgICAgIHsgd2VpZ2h0OiA2IH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ2FkbWluaXN0cmF0aXZlJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LmZpbGwnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNlODUxMTMnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQuaGlnaHdheScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNlZmU5ZTQnIH0sXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAtNDAgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAndHJhbnNpdC5zdGF0aW9uJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgd2VpZ2h0OiA5IH0sXHJcbiAgICAgICAgICAgIHsgaHVlOiAnI2U4NTExMycgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZC5oaWdod2F5JyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy5pY29uJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgdmlzaWJpbGl0eTogJ29mZicgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuc3Ryb2tlJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAxMDAgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogLTEwMCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdwb2knLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnknLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB2aXNpYmlsaXR5OiAnb24nIH0sXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZjBlNGQzJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkLmhpZ2h3YXknLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnkuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2VmZTllNCcgfSxcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IC0yNSB9XHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG5dO1xyXG5cclxuLy9jYWNoZSBnb29nbGUgbWFwIG9iamVjdCBhcyBnbG9iYWwgdmFyaWFibGVcclxudmFyIG1hcCA9IG51bGw7XHJcbi8vIGNhY2hlIG15IGdvb2dsZSBtYXAgYXBpIGtleVxyXG52YXIgTVlfQVBJX0tFWSA9IFwiQUl6YVN5QXlXeHVMRGk1YUl4TUdxQVRBNzR1THg0aHVZMXVGNGhnXCI7XHJcblxyXG4vL2NhY2hlIGluZm9XaW5kb3cgb2JqZWN0IGFzIGdsb2JhbCB2YXJpYWJsZVxyXG52YXIgaW5mb1dpbmRvdyA9IG51bGw7XHJcblxyXG52YXIgSU5JVF9aT09NX05VTSA9IDExO1xyXG52YXIgREVUQUlMX1pPT01fTlVNID0gMTQ7XHJcblxyXG4vL2dvb2dsZSBtYXAgQVBJIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGluaXRNYXAoKXtcclxuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1jYW52YXMnKSwge1xyXG4gICAgICAgIHpvb206IElOSVRfWk9PTV9OVU0sXHJcbiAgICAgICAgY2VudGVyOiBjZW50ZXIubG9jYXRpb25cclxuICAgIH0pO1xyXG4gICAgbWFwLnNldE9wdGlvbnMoe3N0eWxlczogc3R5bGVzfSk7XHJcblxyXG4gICAgLy9pbml0aWFsaXplIG1hcmtlcnMgb24gdGhlIG1hcFxyXG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcclxuICAgIGdlb0xvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxvYyl7XHJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbG9jLmxvY2F0aW9uLFxyXG4gICAgICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICAgICAgdGl0bGU6IGxvYy50aXRsZSxcclxuICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBsb2MuaWNvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2hhdmUgdGhlICBtYXJrZXIgYm91bmNlIGZvciBhIGxpbWl0ZWQgdGltZXNcclxuICAgICAgICAgICAgbWFya2VyLnNldEFuaW1hdGlvbig0KTtcclxuICAgICAgICAgICAgb3BlbkluZm9XaW5kb3cobWFya2VyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vaW52b2tlIGZ1bmN0aW9uIHRvIGFwcGx5IGtub2Nrb3V0IGJpbmRpbmdzXHJcbiAgICBpbml0S29WaWV3TW9kZWw0QXBwKG1hcmtlcnMpO1xyXG59XHJcblxyXG4vKlxyXG4qIEBkZXNjcmlwdGlvbjogb3BlbiBpbmZvIHdpbmRvdyBmb3JcclxuKiAgICAgICAgICAgICAgdGhlIGdpdmVuIGdvb2dsZSBtYXAgbWFya2VyXHJcbiogQHBhcmFtICBtYXJrZXIgdGhlIG9iamVjdCBvZiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBvcGVuSW5mb1dpbmRvdyhtYXJrZXIpe1xyXG5cclxuICAgIC8vY3JlYXRlIGFuIGluZm8gd2luZG93IG9iamVjdFxyXG4gICAgLy9vciBzZXQgY29udGVudCBvbiB0aGUgZXhpc3RpbmcgaW5mbyB3aW5kb3dcclxuICAgIC8vd2UgbmVlZG4ndCBjcmVhdGUgaW5mbyB3aW5kb3cgb2JqZWN0IHJlcGVhdGVkbHlcclxuICAgIGlmKCFpbmZvV2luZG93KXtcclxuICAgICAgICBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAzNTBcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbmZvV2luZG93LmFkZExpc3RlbmVyKCdjbG9zZWNsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG4gICAgfVxyXG5cclxuICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChcIlwiKTtcclxuICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG5cclxuICAgIHZhciBzdHJlZXRWaWV3U2VydmljZSA9IG5ldyBnb29nbGUubWFwcy5TdHJlZXRWaWV3U2VydmljZSgpO1xyXG4gICAgdmFyIHJhZGl1cyA9IDUwO1xyXG5cclxuICAgIC8vIFVzZSBzdHJlZXR2aWV3IHNlcnZpY2UgdG8gZ2V0IHRoZSBjbG9zZXN0IHN0cmVldHZpZXcgaW1hZ2Ugd2l0aGluXHJcbiAgICAvLyA1MCBtZXRlcnMgb2YgdGhlIG1hcmtlcnMgcG9zaXRpb25cclxuICAgIHN0cmVldFZpZXdTZXJ2aWNlLmdldFBhbm9yYW1hQnlMb2NhdGlvbihtYXJrZXIucG9zaXRpb24sIHJhZGl1cywgZ2V0U3RyZWV0Vmlldyk7XHJcbiAgICAvL29wZW4gdGhlIGluZm8gd2luZG93IG9uIHRoZSBnb29nbGUgbWFwXHJcbiAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGdldFN0cmVldFZpZXcoZGF0YSwgc3RhdHVzKSB7XHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PSBnb29nbGUubWFwcy5TdHJlZXRWaWV3U3RhdHVzLk9LKSB7XHJcbiAgICAgICAgICAgIHZhciBuZWFyU3RyZWV0Vmlld0xvY2F0aW9uID0gZGF0YS5sb2NhdGlvbi5sYXRMbmc7XHJcbiAgICAgICAgICAgIHZhciBoZWFkaW5nID0gZ29vZ2xlLm1hcHMuZ2VvbWV0cnkuc3BoZXJpY2FsLmNvbXB1dGVIZWFkaW5nKFxyXG4gICAgICAgICAgICAgICAgbmVhclN0cmVldFZpZXdMb2NhdGlvbiwgbWFya2VyLnBvc2l0aW9uKTtcclxuICAgICAgICAgICAgaW5mb3dpbmRvdy5zZXRDb250ZW50KCc8ZGl2PicgKyBtYXJrZXIudGl0bGUgKyAnPC9kaXY+PGRpdiBpZD1cInBhbm9cIj48L2Rpdj4nKTtcclxuICAgICAgICAgICAgdmFyIHBhbm9yYW1hT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZWFyU3RyZWV0Vmlld0xvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgcG92OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGluZzogaGVhZGluZyxcclxuICAgICAgICAgICAgICAgICAgICBwaXRjaDogMzBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdmFyIHBhbm9yYW1hID0gbmV3IGdvb2dsZS5tYXBzLlN0cmVldFZpZXdQYW5vcmFtYShcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5vJyksIHBhbm9yYW1hT3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy93aGVuIHRoZXJlIGlzIG5vIHN0cmVldHZpZXcgZm91bmQgLFxyXG4gICAgICAgICAgICAvL0knZCBsaWtlIHRvIGFkZCBteSBjdXN0b21pemVkIGluZm8gd2luZG93IGNvbnRlbnRcclxuICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KCc8ZGl2PicgKyBtYXJrZXIudGl0bGUgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdj5ObyBTdHJlZXQgVmlldyBGb3VuZDwvZGl2PicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vYWRkIGdsb2JhbCBhcnJheSBmb3IgY29mZmVlIHNob3AgbWFya2Vyc1xyXG52YXIgY29mZmVlU2hvcE1hcmtlcnMgPSBbXTtcclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiBsb2FkIGNvZmZlZSBzaG9wIGluZm9ybWF0aW9uXHJcbiogICAgICAgICAgICAgICBieSBmb3Vyc3F1YXJlIGFwaVxyXG4qIEBwYXJhbSBtYXJrZXI6IHRoZSBjbGlja2VkIG1hcmtlciBvYmplY3RcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBsb2FkQ29mZmVlU2hvcEluZm8obWFya2VyKXtcclxuICAgIC8vY2xlYXIgb2xkIG1hcmtlcnNcclxuICAgIGNvZmZlZVNob3BNYXJrZXJzLmZvckVhY2goZnVuY3Rpb24oY29mZmVlQmFyTWFya2VyKXtcclxuICAgICAgICBjb2ZmZWVCYXJNYXJrZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfSk7XHJcbiAgICAvL2dyYW50IHBlcm1pc3Npb24gb2YgcmVjeWNsaW5nIHRoZSBvbGQtZmFzaGlvbmVkIG9iamVjdHMgdG8ganMgZW5naW5lXHJcbiAgICBjb2ZmZWVTaG9wTWFya2Vycy5sZW5ndGggPSAwO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIG5laWdoYm9yaG9vZC1tYXBcclxuICAgICBBcHAgSW5mb3JtYXRpb25cclxuICAgICogKi9cclxuICAgIHZhciBjbGllbnRJZCA9ICdYQkVWUldNMUpHWU9CMldTNUxNUE0zNUJKWkZBQU5PVEFQRUVHTk5IUTUyQkRPWFYnO1xyXG4gICAgdmFyIGNsaWVudFNlY3JldCA9ICdQMVhCWFRTQUdPS0FXTUdZSU1IT0FMRzFOU0JQT0pZVlpMVUFENVJTUUVHSjNNTjUnO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIGNvbmNhdGVuYXRlIHRoZSByZXF1ZXN0IHVybCBzdHJpbmdcclxuICAgICogKi9cclxuICAgIHZhciBiYXNlVXJsID0gXCJodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvZXhwbG9yZT9cIjtcclxuICAgIHZhciBxdWVyeVBhcmFtcyA9IFwibGw9XCIrIG1hcmtlci5wb3NpdGlvbi5sYXQoKSArXCIlMkNcIisgbWFya2VyLnBvc2l0aW9uLmxuZygpICtcIiZzZWN0aW9uPWNvZmZlZSZsaW1pdD0xMCZub3ZlbHR5PW5ld1wiO1xyXG4gICAgdmFyIHVzZXJJbmZvID0gJyZjbGllbnRfaWQ9JyArIGNsaWVudElkICsgJyZjbGllbnRfc2VjcmV0PScgKyBjbGllbnRTZWNyZXQgKyBcIiZ2PTIwMTcwMzA4XCI7XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArIHF1ZXJ5UGFyYW1zICsgdXNlckluZm87XHJcblxyXG4gICAgLy9tYWtlIGFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGFwaVxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmwgOiB1cmxcclxuICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IGRhdGEucmVzcG9uc2UuZ3JvdXBzWzBdLml0ZW1zO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtcyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gaXRlbXMpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHZlbnVlID0gaXRlbXNbaV0udmVudWU7XHJcbiAgICAgICAgICAgICAgICAvLyBwbGFjZSB0aGUgYSBtYXJrZXIgb24gdGhlIG1hcFxyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHZlbnVlLmxvY2F0aW9uLmxhdCx2ZW51ZS5sb2NhdGlvbi5sbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB2ZW51ZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcIi4vZGlzdC9pbWFnZXMvY29mZmVlLW4tdGVhLnBuZ1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb2ZmZWVTaG9wTWFya2Vycy5wdXNoKG1hcmtlcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAvL2RvIHJlc3BvbnNlIGVycm9yIGhhbmRsaW5nXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwidGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMgKyBcIiwgZXJyb3JUaHJvd246XCIgK2Vycm9yVGhyb3duKTtcclxuICAgIC8vZG8gYWpheCBsb2dnaW5nIG9uIHRoZSBicm93c2VyIGNvbnNvbGVcclxuICAgIH0pLmFsd2F5cyAoZnVuY3Rpb24oanFYSFJPckRhdGEsIHRleHRTdGF0dXMsIGpxWEhST3JFcnJvclRocm93bikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcImFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGlzIGNvbXBsZXRlZCwgdGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiB6b29tIGluIGFuZCBzZXQgY2VudGVyIG9mIHRoZSBtYXBcclxuKiBAcGFyYW0gbWFya2VyIHRoZSBnaXZlbiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiB6b29tSW4yTWFya2VyKG1hcmtlcil7XHJcbiAgICBtYXAuc2V0Q2VudGVyKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcclxuICAgIG1hcC5zZXRab29tKERFVEFJTF9aT09NX05VTSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogem9vbSBvdXQgdG8gdGhlIGluaXRpYWwgc3RhdGUgb2YgZ29vZ2xlIG1hcFxyXG4gKiBAcGFyYW0gbm9uZVxyXG4gKiBAcmV0dXJuIHZvaWRcclxuICogKi9cclxuZnVuY3Rpb24gem9vbU91dDJJbml0U3RhdHVzKCl7XHJcbiAgICBtYXAuc2V0Q2VudGVyKGNlbnRlci5sb2NhdGlvbik7XHJcbiAgICBtYXAuc2V0Wm9vbShJTklUX1pPT01fTlVNKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
