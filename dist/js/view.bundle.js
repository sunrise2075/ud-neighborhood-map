function initMap(){map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:INIT_ZOOM_NUM,center:center.location}),map.setOptions({styles:styles});var e=[];geoLocations.forEach(function(o){var t=new google.maps.Marker({position:o.location,map:map,title:o.title,icon:{url:o.icon}});t.addListener("click",function(){t.setAnimation(4),openInfoWindow(t)}),e.push(t)}),initKoViewModel4App(e)}function openInfoWindow(e){infoWindow?infoWindow.marker=e:(infoWindow=new google.maps.InfoWindow({position:e.getPosition(),maxWidth:350}),infoWindow.addListener("closeclick",function(){infoWindow.marker=null})),infoWindow.setContent(""),infoWindow.marker=e,showLocationDetail(e),infoWindow.open(map,e)}function showLocationDetail(e){var o="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.position.lat()+","+e.position.lng()+"&key="+MY_API_KEY;$.ajax({url:o}).done(function(e,o,t){console.log(e);var n="";if("OK"===e.status){var i=e.results[0].place_id;n+="<div>地址ID:"+i+"</div>";var a=e.results[0].formatted_address;n+="<div>详情:"+a+"</div>";var s=e.results[0].geometry;n+="<div>类型:"+s.location_type+"</div>",n+="<div>纬度:"+s.location.lat+"</div>",n+="<div>经度:"+s.location.lng+"</div>",infoWindow.setContent(n)}}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function loadCoffeeShopInfo(e){coffeeShopMarkers.forEach(function(e){e.setMap(null)}),coffeeShopMarkers.length=0;var o="XBEVRWM1JGYOB2WS5LMPM35BJZFAANOTAPEEGNNHQ52BDOXV",t="P1XBXTSAGOKAWMGYIMHOALG1NSBPOJYVZLUAD5RSQEGJ3MN5",n="https://api.foursquare.com/v2/venues/explore?",i="ll="+e.position.lat()+"%2C"+e.position.lng()+"&section=coffee&limit=10&novelty=new",a="&client_id="+o+"&client_secret="+t+"&v=20170308",s=n+i+a;$.ajax({url:s}).done(function(e,o,t){var n=e.response.groups[0].items;n.forEach(function(e){var o=e.venue,t=new google.maps.Marker({position:new google.maps.LatLng(o.location.lat,o.location.lng),map:map,title:o.name,icon:{url:"./dist/images/coffee-n-tea.png"}});t.addListener("click",function(){t.setAnimation(4),openInfoWindow(t)}),coffeeShopMarkers.push(t)})}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function zoomIn2Marker(e){map.setCenter(e.getPosition()),map.setZoom(DETAIL_ZOOM_NUM)}function zoomOut2InitStatus(){map.setCenter(center.location),map.setZoom(INIT_ZOOM_NUM)}var styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}],map=null,MY_API_KEY="AIzaSyAyWxuLDi5aIxMGqATA74uLx4huY1uF4hg",infoWindow=null,INIT_ZOOM_NUM=11,DETAIL_ZOOM_NUM=14,coffeeShopMarkers=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC52aWV3LmpzIl0sIm5hbWVzIjpbImluaXRNYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJJTklUX1pPT01fTlVNIiwiY2VudGVyIiwibG9jYXRpb24iLCJzZXRPcHRpb25zIiwic3R5bGVzIiwibWFya2VycyIsImdlb0xvY2F0aW9ucyIsImZvckVhY2giLCJsb2MiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsInRpdGxlIiwiaWNvbiIsInVybCIsImFkZExpc3RlbmVyIiwic2V0QW5pbWF0aW9uIiwib3BlbkluZm9XaW5kb3ciLCJwdXNoIiwiaW5pdEtvVmlld01vZGVsNEFwcCIsImluZm9XaW5kb3ciLCJJbmZvV2luZG93IiwiZ2V0UG9zaXRpb24iLCJtYXhXaWR0aCIsInNldENvbnRlbnQiLCJzaG93TG9jYXRpb25EZXRhaWwiLCJvcGVuIiwibGF0IiwibG5nIiwiTVlfQVBJX0tFWSIsIiQiLCJhamF4IiwiZG9uZSIsImRhdGEiLCJ0ZXh0U3RhdHVzIiwianFYaHIiLCJjb25zb2xlIiwibG9nIiwiZGV0YWlsU3RyaW5nIiwic3RhdHVzIiwicGxhY2VfaWQiLCJyZXN1bHRzIiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJnZW9tZXRyeSIsImxvY2F0aW9uX3R5cGUiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbHdheXMiLCJqcVhIUk9yRGF0YSIsImpxWEhST3JFcnJvclRocm93biIsImxvYWRDb2ZmZWVTaG9wSW5mbyIsImNvZmZlZVNob3BNYXJrZXJzIiwiY29mZmVlQmFyTWFya2VyIiwic2V0TWFwIiwibGVuZ3RoIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJiYXNlVXJsIiwicXVlcnlQYXJhbXMiLCJ1c2VySW5mbyIsIml0ZW1zIiwicmVzcG9uc2UiLCJncm91cHMiLCJpdGVtIiwidmVudWUiLCJMYXRMbmciLCJuYW1lIiwiem9vbUluMk1hcmtlciIsInNldENlbnRlciIsInNldFpvb20iLCJERVRBSUxfWk9PTV9OVU0iLCJ6b29tT3V0MkluaXRTdGF0dXMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJjb2xvciIsImVsZW1lbnRUeXBlIiwid2VpZ2h0IiwibGlnaHRuZXNzIiwiaHVlIiwidmlzaWJpbGl0eSJdLCJtYXBwaW5ncyI6IkFBbUZBLFFBQUFBLFdBQ0FDLElBQUEsR0FBQUMsUUFBQUMsS0FBQUMsSUFBQUMsU0FBQUMsZUFBQSxlQUNBQyxLQUFBQyxjQUNBQyxPQUFBQSxPQUFBQyxXQUVBVCxJQUFBVSxZQUFBQyxPQUFBQSxRQUdBLElBQUFDLEtBQ0FDLGNBQUFDLFFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBLEdBQUFmLFFBQUFDLEtBQUFlLFFBQ0FDLFNBQUFILEVBQUFOLFNBQ0FULElBQUFBLElBQ0FtQixNQUFBSixFQUFBSSxNQUNBQyxNQUNBQyxJQUFBTixFQUFBSyxPQUdBSixHQUFBTSxZQUFBLFFBQUEsV0FFQU4sRUFBQU8sYUFBQSxHQUNBQyxlQUFBUixLQUVBSixFQUFBYSxLQUFBVCxLQUlBVSxvQkFBQWQsR0FTQSxRQUFBWSxnQkFBQVIsR0FLQVcsV0FTQUEsV0FBQVgsT0FBQUEsR0FSQVcsV0FBQSxHQUFBMUIsUUFBQUMsS0FBQTBCLFlBQ0FWLFNBQUFGLEVBQUFhLGNBQ0FDLFNBQUEsTUFFQUgsV0FBQUwsWUFBQSxhQUFBLFdBQ0FLLFdBQUFYLE9BQUEsUUFNQVcsV0FBQUksV0FBQSxJQUNBSixXQUFBWCxPQUFBQSxFQUNBZ0IsbUJBQUFoQixHQUNBVyxXQUFBTSxLQUFBakMsSUFBQWdCLEdBWUEsUUFBQWdCLG9CQUFBaEIsR0FFQSxHQUFBSyxHQUFBLDREQUNBTCxFQUFBRSxTQUFBZ0IsTUFDQSxJQUNBbEIsRUFBQUUsU0FBQWlCLE1BQ0EsUUFDQUMsVUFHQUMsR0FBQUMsTUFDQWpCLElBQUFBLElBRUFrQixLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLFFBQUFDLElBQUFKLEVBQ0EsSUFBQUssR0FBQSxFQUNBLElBQUEsT0FBQUwsRUFBQU0sT0FBQSxDQUNBLEdBQUFDLEdBQUFQLEVBQUFRLFFBQUEsR0FBQUQsUUFDQUYsSUFBQSxhQUFBRSxFQUFBLFFBRUEsSUFBQUUsR0FBQVQsRUFBQVEsUUFBQSxHQUFBQyxpQkFDQUosSUFBQSxXQUFBSSxFQUFBLFFBRUEsSUFBQUMsR0FBQVYsRUFBQVEsUUFBQSxHQUFBRSxRQUNBTCxJQUFBLFdBQUFLLEVBQUFDLGNBQUEsU0FDQU4sR0FBQSxXQUFBSyxFQUFBekMsU0FBQXlCLElBQUEsU0FDQVcsR0FBQSxXQUFBSyxFQUFBekMsU0FBQTBCLElBQUEsU0FDQVIsV0FBQUksV0FBQWMsTUFHQU8sS0FBQSxTQUFBVixFQUFBRCxFQUFBWSxHQUNBVixRQUFBQyxJQUFBLGNBQUFILEVBQUEsaUJBQUFZLEtBRUFDLE9BQUEsU0FBQUMsRUFBQWQsRUFBQWUsR0FDQWIsUUFBQUMsSUFBQSx1REFBQUgsS0FjQSxRQUFBZ0Isb0JBQUF6QyxHQUVBMEMsa0JBQUE1QyxRQUFBLFNBQUE2QyxHQUNBQSxFQUFBQyxPQUFBLFFBR0FGLGtCQUFBRyxPQUFBLENBTUEsSUFBQUMsR0FBQSxtREFDQUMsRUFBQSxtREFLQUMsRUFBQSxnREFDQUMsRUFBQSxNQUFBakQsRUFBQUUsU0FBQWdCLE1BQUEsTUFBQWxCLEVBQUFFLFNBQUFpQixNQUFBLHVDQUNBK0IsRUFBQSxjQUFBSixFQUFBLGtCQUFBQyxFQUFBLGNBQ0ExQyxFQUFBMkMsRUFBQUMsRUFBQUMsQ0FHQTdCLEdBQUFDLE1BQ0FqQixJQUFBQSxJQUVBa0IsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUF5QixHQUFBM0IsRUFBQTRCLFNBQUFDLE9BQUEsR0FBQUYsS0FDQUEsR0FBQXJELFFBQUEsU0FBQXdELEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUMsTUFFQXZELEVBQUEsR0FBQWYsUUFBQUMsS0FBQWUsUUFDQUMsU0FBQSxHQUFBakIsUUFBQUMsS0FBQXNFLE9BQUFELEVBQUE5RCxTQUFBeUIsSUFBQXFDLEVBQUE5RCxTQUFBMEIsS0FDQW5DLElBQUFBLElBQ0FtQixNQUFBb0QsRUFBQUUsS0FDQXJELE1BQ0FDLElBQUEsbUNBR0FMLEdBQUFNLFlBQUEsUUFBQSxXQUVBTixFQUFBTyxhQUFBLEdBQ0FDLGVBQUFSLEtBRUEwQyxrQkFBQWpDLEtBQUFULE9BSUFvQyxLQUFBLFNBQUFWLEVBQUFELEVBQUFZLEdBQ0FWLFFBQUFDLElBQUEsY0FBQUgsRUFBQSxpQkFBQVksS0FFQUMsT0FBQSxTQUFBQyxFQUFBZCxFQUFBZSxHQUNBYixRQUFBQyxJQUFBLHVEQUFBSCxLQVNBLFFBQUFpQyxlQUFBMUQsR0FDQWhCLElBQUEyRSxVQUFBM0QsRUFBQWEsZUFDQTdCLElBQUE0RSxRQUFBQyxpQkFRQSxRQUFBQyxzQkFDQTlFLElBQUEyRSxVQUFBbkUsT0FBQUMsVUFDQVQsSUFBQTRFLFFBQUFyRSxlQTdRQSxHQUFBSSxVQUVBb0UsWUFBQSxRQUNBQyxVQUNBQyxNQUFBLGNBR0FGLFlBQUEsaUJBQ0FHLFlBQUEscUJBQ0FGLFVBQ0FDLE1BQUEsWUFDQUUsT0FBQSxNQUdBSixZQUFBLGlCQUNBRyxZQUFBLG1CQUNBRixVQUNBQyxNQUFBLGNBR0FGLFlBQUEsZUFDQUcsWUFBQSxrQkFDQUYsVUFDQUMsTUFBQSxZQUNBRyxXQUFBLE9BR0FMLFlBQUEsa0JBQ0FDLFVBQ0FHLE9BQUEsSUFDQUUsSUFBQSxjQUdBTixZQUFBLGVBQ0FHLFlBQUEsY0FDQUYsVUFDQU0sV0FBQSxVQUdBUCxZQUFBLFFBQ0FHLFlBQUEscUJBQ0FGLFVBQ0FJLFVBQUEsUUFHQUwsWUFBQSxRQUNBRyxZQUFBLG1CQUNBRixVQUNBSSxXQUFBLFFBR0FMLFlBQUEsTUFDQUcsWUFBQSxXQUNBRixVQUNBTSxXQUFBLE9BQ0FMLE1BQUEsY0FHQUYsWUFBQSxlQUNBRyxZQUFBLGdCQUNBRixVQUNBQyxNQUFBLFlBQ0FHLFdBQUEsT0FNQXBGLElBQUEsS0FFQW9DLFdBQUEsMENBR0FULFdBQUEsS0FFQXBCLGNBQUEsR0FDQXNFLGdCQUFBLEdBK0dBbkIiLCJmaWxlIjoidmlldy5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBzdW5yaXNlMjA3NSBvbiAyMDE3LzIvMjYuXHJcbiAqL1xyXG4vLyBDcmVhdGUgYSBzdHlsZXMgYXJyYXkgdG8gdXNlIHdpdGggdGhlIG1hcC5cclxudmFyIHN0eWxlcyA9IFtcclxuICAgIHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjMTlhMGQ4JyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdhZG1pbmlzdHJhdGl2ZScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNmZmZmZmYnIH0sXHJcbiAgICAgICAgICAgIHsgd2VpZ2h0OiA2IH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ2FkbWluaXN0cmF0aXZlJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LmZpbGwnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNlODUxMTMnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQuaGlnaHdheScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNlZmU5ZTQnIH0sXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAtNDAgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAndHJhbnNpdC5zdGF0aW9uJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgd2VpZ2h0OiA5IH0sXHJcbiAgICAgICAgICAgIHsgaHVlOiAnI2U4NTExMycgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZC5oaWdod2F5JyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy5pY29uJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgdmlzaWJpbGl0eTogJ29mZicgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuc3Ryb2tlJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAxMDAgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogLTEwMCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdwb2knLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnknLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB2aXNpYmlsaXR5OiAnb24nIH0sXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZjBlNGQzJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkLmhpZ2h3YXknLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnkuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2VmZTllNCcgfSxcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IC0yNSB9XHJcbiAgICAgICAgXVxyXG4gICAgfVxyXG5dO1xyXG5cclxuLy9jYWNoZSBnb29nbGUgbWFwIG9iamVjdCBhcyBnbG9iYWwgdmFyaWFibGVcclxudmFyIG1hcCA9IG51bGw7XHJcbi8vIGNhY2hlIG15IGdvb2dsZSBtYXAgYXBpIGtleVxyXG52YXIgTVlfQVBJX0tFWSA9IFwiQUl6YVN5QXlXeHVMRGk1YUl4TUdxQVRBNzR1THg0aHVZMXVGNGhnXCI7XHJcblxyXG4vL2NhY2hlIGluZm9XaW5kb3cgb2JqZWN0IGFzIGdsb2JhbCB2YXJpYWJsZVxyXG52YXIgaW5mb1dpbmRvdyA9IG51bGw7XHJcblxyXG52YXIgSU5JVF9aT09NX05VTSA9IDExO1xyXG52YXIgREVUQUlMX1pPT01fTlVNID0gMTQ7XHJcblxyXG4vL2dvb2dsZSBtYXAgQVBJIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGluaXRNYXAoKXtcclxuICAgIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC1jYW52YXMnKSwge1xyXG4gICAgICAgIHpvb206IElOSVRfWk9PTV9OVU0sXHJcbiAgICAgICAgY2VudGVyOiBjZW50ZXIubG9jYXRpb25cclxuICAgIH0pO1xyXG4gICAgbWFwLnNldE9wdGlvbnMoe3N0eWxlczogc3R5bGVzfSk7XHJcblxyXG4gICAgLy9pbml0aWFsaXplIG1hcmtlcnMgb24gdGhlIG1hcFxyXG4gICAgdmFyIG1hcmtlcnMgPSBbXTtcclxuICAgIGdlb0xvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxvYyl7XHJcbiAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbG9jLmxvY2F0aW9uLFxyXG4gICAgICAgICAgICBtYXA6IG1hcCxcclxuICAgICAgICAgICAgdGl0bGU6IGxvYy50aXRsZSxcclxuICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBsb2MuaWNvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvL2hhdmUgdGhlICBtYXJrZXIgYm91bmNlIGZvciBhIGxpbWl0ZWQgdGltZXNcclxuICAgICAgICAgICAgbWFya2VyLnNldEFuaW1hdGlvbig0KTtcclxuICAgICAgICAgICAgb3BlbkluZm9XaW5kb3cobWFya2VyKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vaW52b2tlIGZ1bmN0aW9uIHRvIGFwcGx5IGtub2Nrb3V0IGJpbmRpbmdzXHJcbiAgICBpbml0S29WaWV3TW9kZWw0QXBwKG1hcmtlcnMpO1xyXG59XHJcblxyXG4vKlxyXG4qIEBkZXNjcmlwdGlvbjogb3BlbiBpbmZvIHdpbmRvdyBmb3JcclxuKiAgICAgICAgICAgICAgdGhlIGdpdmVuIGdvb2dsZSBtYXAgbWFya2VyXHJcbiogQHBhcmFtICBtYXJrZXIgdGhlIG9iamVjdCBvZiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBvcGVuSW5mb1dpbmRvdyhtYXJrZXIpe1xyXG5cclxuICAgIC8vY3JlYXRlIGFuIGluZm8gd2luZG93IG9iamVjdFxyXG4gICAgLy9vciBzZXQgY29udGVudCBvbiB0aGUgZXhpc3RpbmcgaW5mbyB3aW5kb3dcclxuICAgIC8vd2UgbmVlZG4ndCBjcmVhdGUgaW5mbyB3aW5kb3cgb2JqZWN0IHJlcGVhdGVkbHlcclxuICAgIGlmKCFpbmZvV2luZG93KXtcclxuICAgICAgICBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAzNTBcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbmZvV2luZG93LmFkZExpc3RlbmVyKCdjbG9zZWNsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG4gICAgfVxyXG5cclxuICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChcIlwiKTtcclxuICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG4gICAgc2hvd0xvY2F0aW9uRGV0YWlsKG1hcmtlcik7XHJcbiAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogcXVlcnkgZGV0YWlsZWQgaW5mb3JtYXRpb25cclxuICogZm9yIHRoZSBnaXZlbiBtYXJrZXIgYW5kIHNldCBjb250ZW50IGZvclxyXG4gKiBjdXJyZW50IGluZm8gd2luZG93XHJcbiAqIEBwYXJhbSAgbWFya2VyIHRoZSBvYmplY3Qgb2YgbWFya2VyXHJcbiAqIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIHNob3dMb2NhdGlvbkRldGFpbChtYXJrZXIpe1xyXG5cclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/bGF0bG5nPVwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubGF0KCkgK1xyXG4gICAgICAgIFwiLFwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubG5nKCkgK1xyXG4gICAgICAgIFwiJmtleT1cIiArXHJcbiAgICAgICAgTVlfQVBJX0tFWTtcclxuXHJcbiAgICAvL21ha2UgYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgYXBpXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybCA6IHVybFxyXG4gICAgICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgIHZhciBkZXRhaWxTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgaWYoZGF0YS5zdGF0dXMgPT09IFwiT0tcIil7XHJcbiAgICAgICAgICAgIHZhciBwbGFjZV9pZCA9IGRhdGEucmVzdWx0c1swXS5wbGFjZV9pZDtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2PuWcsOWdgElEOlwiICsgcGxhY2VfaWQgKyBcIjwvZGl2PlwiO1xyXG5cclxuICAgICAgICAgICB2YXIgZm9ybWF0dGVkX2FkZHJlc3MgPSBkYXRhLnJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3M7XHJcbiAgICAgICAgICAgZGV0YWlsU3RyaW5nICs9IFwiPGRpdj7or6bmg4U6XCIgKyBmb3JtYXR0ZWRfYWRkcmVzcyArIFwiPC9kaXY+XCI7XHJcblxyXG4gICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGRhdGEucmVzdWx0c1swXS5nZW9tZXRyeTtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Puexu+WeizpcIiArIGdlb21ldHJ5LmxvY2F0aW9uX3R5cGUgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+57qs5bqmOlwiICsgZ2VvbWV0cnkubG9jYXRpb24ubGF0ICsgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Pue7j+W6pjpcIiArIGdlb21ldHJ5LmxvY2F0aW9uLmxuZyArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGRldGFpbFN0cmluZyk7XHJcbiAgICAgICB9XHJcbiAgICAgICAgLy9kbyByZXNwb25zZSBlcnJvciBoYW5kbGluZ1xyXG4gICAgfSkuZmFpbChmdW5jdGlvbihqcVhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcInRleHRTdGF0dXM6XCIgKyB0ZXh0U3RhdHVzICsgXCIsIGVycm9yVGhyb3duOlwiICtlcnJvclRocm93bik7XHJcbiAgICAgICAgLy9kbyBhamF4IGxvZ2dpbmcgb24gdGhlIGJyb3dzZXIgY29uc29sZVxyXG4gICAgfSkuYWx3YXlzIChmdW5jdGlvbihqcVhIUk9yRGF0YSwgdGV4dFN0YXR1cywganFYSFJPckVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwiYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgaXMgY29tcGxldGVkLCB0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8vYWRkIGdsb2JhbCBhcnJheSBmb3IgY29mZmVlIHNob3AgbWFya2Vyc1xyXG52YXIgY29mZmVlU2hvcE1hcmtlcnMgPSBbXTtcclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiBsb2FkIGNvZmZlZSBzaG9wIGluZm9ybWF0aW9uXHJcbiogICAgICAgICAgICAgICBieSBmb3Vyc3F1YXJlIGFwaVxyXG4qIEBwYXJhbSBtYXJrZXI6IHRoZSBjbGlja2VkIG1hcmtlciBvYmplY3RcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBsb2FkQ29mZmVlU2hvcEluZm8obWFya2VyKXtcclxuICAgIC8vY2xlYXIgb2xkIG1hcmtlcnNcclxuICAgIGNvZmZlZVNob3BNYXJrZXJzLmZvckVhY2goZnVuY3Rpb24oY29mZmVlQmFyTWFya2VyKXtcclxuICAgICAgICBjb2ZmZWVCYXJNYXJrZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfSk7XHJcbiAgICAvL2dyYW50IHBlcm1pc3Npb24gb2YgcmVjeWNsaW5nIHRoZSBvbGQtZmFzaGlvbmVkIG9iamVjdHMgdG8ganMgZW5naW5lXHJcbiAgICBjb2ZmZWVTaG9wTWFya2Vycy5sZW5ndGggPSAwO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIG5laWdoYm9yaG9vZC1tYXBcclxuICAgICBBcHAgSW5mb3JtYXRpb25cclxuICAgICogKi9cclxuICAgIHZhciBjbGllbnRJZCA9ICdYQkVWUldNMUpHWU9CMldTNUxNUE0zNUJKWkZBQU5PVEFQRUVHTk5IUTUyQkRPWFYnO1xyXG4gICAgdmFyIGNsaWVudFNlY3JldCA9ICdQMVhCWFRTQUdPS0FXTUdZSU1IT0FMRzFOU0JQT0pZVlpMVUFENVJTUUVHSjNNTjUnO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIGNvbmNhdGVuYXRlIHRoZSByZXF1ZXN0IHVybCBzdHJpbmdcclxuICAgICogKi9cclxuICAgIHZhciBiYXNlVXJsID0gXCJodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvZXhwbG9yZT9cIjtcclxuICAgIHZhciBxdWVyeVBhcmFtcyA9IFwibGw9XCIrIG1hcmtlci5wb3NpdGlvbi5sYXQoKSArXCIlMkNcIisgbWFya2VyLnBvc2l0aW9uLmxuZygpICtcIiZzZWN0aW9uPWNvZmZlZSZsaW1pdD0xMCZub3ZlbHR5PW5ld1wiO1xyXG4gICAgdmFyIHVzZXJJbmZvID0gJyZjbGllbnRfaWQ9JyArIGNsaWVudElkICsgJyZjbGllbnRfc2VjcmV0PScgKyBjbGllbnRTZWNyZXQgKyBcIiZ2PTIwMTcwMzA4XCI7XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArIHF1ZXJ5UGFyYW1zICsgdXNlckluZm87XHJcblxyXG4gICAgLy9tYWtlIGFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGFwaVxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmwgOiB1cmxcclxuICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gZGF0YS5yZXNwb25zZS5ncm91cHNbMF0uaXRlbXM7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIHZhciB2ZW51ZSA9IGl0ZW0udmVudWU7XHJcbiAgICAgICAgICAgICAgICAvLyBwbGFjZSB0aGUgYSBtYXJrZXIgb24gdGhlIG1hcFxyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHZlbnVlLmxvY2F0aW9uLmxhdCx2ZW51ZS5sb2NhdGlvbi5sbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB2ZW51ZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IHsvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiLi9kaXN0L2ltYWdlcy9jb2ZmZWUtbi10ZWEucG5nXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2hhdmUgdGhlICBtYXJrZXIgYm91bmNlIGZvciBhIGxpbWl0ZWQgdGltZXNcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuc2V0QW5pbWF0aW9uKDQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JbmZvV2luZG93KG1hcmtlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvZmZlZVNob3BNYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAvL2RvIHJlc3BvbnNlIGVycm9yIGhhbmRsaW5nXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwidGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMgKyBcIiwgZXJyb3JUaHJvd246XCIgK2Vycm9yVGhyb3duKTtcclxuICAgIC8vZG8gYWpheCBsb2dnaW5nIG9uIHRoZSBicm93c2VyIGNvbnNvbGVcclxuICAgIH0pLmFsd2F5cyAoZnVuY3Rpb24oanFYSFJPckRhdGEsIHRleHRTdGF0dXMsIGpxWEhST3JFcnJvclRocm93bikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcImFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGlzIGNvbXBsZXRlZCwgdGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiB6b29tIGluIGFuZCBzZXQgY2VudGVyIG9mIHRoZSBtYXBcclxuKiBAcGFyYW0gbWFya2VyIHRoZSBnaXZlbiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiB6b29tSW4yTWFya2VyKG1hcmtlcil7XHJcbiAgICBtYXAuc2V0Q2VudGVyKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcclxuICAgIG1hcC5zZXRab29tKERFVEFJTF9aT09NX05VTSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogem9vbSBvdXQgdG8gdGhlIGluaXRpYWwgc3RhdGUgb2YgZ29vZ2xlIG1hcFxyXG4gKiBAcGFyYW0gbm9uZVxyXG4gKiBAcmV0dXJuIHZvaWRcclxuICogKi9cclxuZnVuY3Rpb24gem9vbU91dDJJbml0U3RhdHVzKCl7XHJcbiAgICBtYXAuc2V0Q2VudGVyKGNlbnRlci5sb2NhdGlvbik7XHJcbiAgICBtYXAuc2V0Wm9vbShJTklUX1pPT01fTlVNKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
