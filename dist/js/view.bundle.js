function initMap(){map=new BMap.Map("map-canvas");var e=new BMap.Point(center.location.lng,center.location.lat);map.centerAndZoom(e,INIT_ZOOM_NUM),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.ScaleControl),map.addControl(new BMap.OverviewMapControl),map.addControl(new BMap.MapTypeControl),map.setCurrentCity("深圳");var o=new BMap.LocalSearch(map,{renderOptions:{map:map}});o.search("罗湖火车站")}function openInfoWindow(e){infoWindow?infoWindow.marker=e:(infoWindow=new google.maps.InfoWindow({position:e.getPosition(),maxWidth:350}),infoWindow.addListener("closeclick",function(){infoWindow.marker=null})),infoWindow.setContent(""),infoWindow.marker=e,showLocationDetail(e),infoWindow.open(map,e)}function showLocationDetail(e){var o="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.position.lat()+","+e.position.lng()+"&key="+MY_API_KEY;$.ajax({url:o}).done(function(e,o,t){console.log(e);var n="";if("OK"===e.status){var a=e.results[0].place_id;n+="<div>地址ID:"+a+"</div>";var i=e.results[0].formatted_address;n+="<div>详情:"+i+"</div>";var l=e.results[0].geometry;n+="<div>类型:"+l.location_type+"</div>",n+="<div>纬度:"+l.location.lat+"</div>",n+="<div>经度:"+l.location.lng+"</div>",infoWindow.setContent(n)}}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function loadCoffeeShopInfo(e){coffeeShopMarkers.forEach(function(e){e.setMap(null)}),coffeeShopMarkers.length=0;var o="XBEVRWM1JGYOB2WS5LMPM35BJZFAANOTAPEEGNNHQ52BDOXV",t="P1XBXTSAGOKAWMGYIMHOALG1NSBPOJYVZLUAD5RSQEGJ3MN5",n="https://api.foursquare.com/v2/venues/explore?",a="ll="+e.position.lat()+"%2C"+e.position.lng()+"&section=coffee&limit=10&novelty=new",i="&client_id="+o+"&client_secret="+t+"&v=20170308",l=n+a+i;$.ajax({url:l}).done(function(e,o,t){var n=e.response.groups[0].items;n.forEach(function(e){var o=e.venue,t=new google.maps.Marker({position:new google.maps.LatLng(o.location.lat,o.location.lng),map:map,title:o.name,icon:{url:"./dist/images/coffee-n-tea.png"}});t.addListener("click",function(){t.setAnimation(4),openInfoWindow(t)}),coffeeShopMarkers.push(t)})}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function zoomIn2Marker(e){map.setCenter(e.getPosition()),map.setZoom(DETAIL_ZOOM_NUM)}function zoomOut2InitStatus(){map.setCenter(center.location),map.setZoom(INIT_ZOOM_NUM)}var styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}],map=null,MY_API_KEY="HW1hgQNz18TYRRn7BjN6BOMALz6h5G1C",infoWindow=null,INIT_ZOOM_NUM=11,DETAIL_ZOOM_NUM=14;initMap();var coffeeShopMarkers=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC52aWV3LmpzIl0sIm5hbWVzIjpbImluaXRNYXAiLCJtYXAiLCJCTWFwIiwiTWFwIiwicG9pbnQiLCJQb2ludCIsImNlbnRlciIsImxvY2F0aW9uIiwibG5nIiwibGF0IiwiY2VudGVyQW5kWm9vbSIsIklOSVRfWk9PTV9OVU0iLCJhZGRDb250cm9sIiwiTmF2aWdhdGlvbkNvbnRyb2wiLCJTY2FsZUNvbnRyb2wiLCJPdmVydmlld01hcENvbnRyb2wiLCJNYXBUeXBlQ29udHJvbCIsInNldEN1cnJlbnRDaXR5IiwibG9jYWwiLCJMb2NhbFNlYXJjaCIsInJlbmRlck9wdGlvbnMiLCJzZWFyY2giLCJvcGVuSW5mb1dpbmRvdyIsIm1hcmtlciIsImluZm9XaW5kb3ciLCJnb29nbGUiLCJtYXBzIiwiSW5mb1dpbmRvdyIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJtYXhXaWR0aCIsImFkZExpc3RlbmVyIiwic2V0Q29udGVudCIsInNob3dMb2NhdGlvbkRldGFpbCIsIm9wZW4iLCJ1cmwiLCJNWV9BUElfS0VZIiwiJCIsImFqYXgiLCJkb25lIiwiZGF0YSIsInRleHRTdGF0dXMiLCJqcVhociIsImNvbnNvbGUiLCJsb2ciLCJkZXRhaWxTdHJpbmciLCJzdGF0dXMiLCJwbGFjZV9pZCIsInJlc3VsdHMiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsImdlb21ldHJ5IiwibG9jYXRpb25fdHlwZSIsImZhaWwiLCJlcnJvclRocm93biIsImFsd2F5cyIsImpxWEhST3JEYXRhIiwianFYSFJPckVycm9yVGhyb3duIiwibG9hZENvZmZlZVNob3BJbmZvIiwiY29mZmVlU2hvcE1hcmtlcnMiLCJmb3JFYWNoIiwiY29mZmVlQmFyTWFya2VyIiwic2V0TWFwIiwibGVuZ3RoIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJiYXNlVXJsIiwicXVlcnlQYXJhbXMiLCJ1c2VySW5mbyIsIml0ZW1zIiwicmVzcG9uc2UiLCJncm91cHMiLCJpdGVtIiwidmVudWUiLCJNYXJrZXIiLCJMYXRMbmciLCJ0aXRsZSIsIm5hbWUiLCJpY29uIiwic2V0QW5pbWF0aW9uIiwicHVzaCIsInpvb21JbjJNYXJrZXIiLCJzZXRDZW50ZXIiLCJzZXRab29tIiwiREVUQUlMX1pPT01fTlVNIiwiem9vbU91dDJJbml0U3RhdHVzIiwic3R5bGVzIiwiZmVhdHVyZVR5cGUiLCJzdHlsZXJzIiwiY29sb3IiLCJlbGVtZW50VHlwZSIsIndlaWdodCIsImxpZ2h0bmVzcyIsImh1ZSIsInZpc2liaWxpdHkiXSwibWFwcGluZ3MiOiJBQW1GQSxRQUFBQSxXQUVBQyxJQUFBLEdBQUFDLE1BQUFDLElBQUEsYUFDQSxJQUFBQyxHQUFBLEdBQUFGLE1BQUFHLE1BQUFDLE9BQUFDLFNBQUFDLElBQUFGLE9BQUFDLFNBQUFFLElBQ0FSLEtBQUFTLGNBQUFOLEVBQUFPLGVBQ0FWLElBQUFXLFdBQUEsR0FBQVYsTUFBQVcsbUJBQ0FaLElBQUFXLFdBQUEsR0FBQVYsTUFBQVcsbUJBQ0FaLElBQUFXLFdBQUEsR0FBQVYsTUFBQVksY0FDQWIsSUFBQVcsV0FBQSxHQUFBVixNQUFBYSxvQkFDQWQsSUFBQVcsV0FBQSxHQUFBVixNQUFBYyxnQkFDQWYsSUFBQWdCLGVBQUEsS0FFQSxJQUFBQyxHQUFBLEdBQUFoQixNQUFBaUIsWUFBQWxCLEtBQ0FtQixlQUFBbkIsSUFBQUEsTUFFQWlCLEdBQUFHLE9BQUEsU0FrQ0EsUUFBQUMsZ0JBQUFDLEdBS0FDLFdBU0FBLFdBQUFELE9BQUFBLEdBUkFDLFdBQUEsR0FBQUMsUUFBQUMsS0FBQUMsWUFDQUMsU0FBQUwsRUFBQU0sY0FDQUMsU0FBQSxNQUVBTixXQUFBTyxZQUFBLGFBQUEsV0FDQVAsV0FBQUQsT0FBQSxRQU1BQyxXQUFBUSxXQUFBLElBQ0FSLFdBQUFELE9BQUFBLEVBQ0FVLG1CQUFBVixHQUNBQyxXQUFBVSxLQUFBakMsSUFBQXNCLEdBWUEsUUFBQVUsb0JBQUFWLEdBRUEsR0FBQVksR0FBQSw0REFDQVosRUFBQUssU0FBQW5CLE1BQ0EsSUFDQWMsRUFBQUssU0FB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QSxZQUNBRyxXQUFBLE9BTUExRixJQUFBLEtBRUFtQyxXQUFBLG1DQUdBWixXQUFBLEtBRUFiLGNBQUEsR0FDQXdFLGdCQUFBLEVBNENBbkYsVUFnRkEsSUFBQTBEIiwiZmlsZSI6InZpZXcuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgc3VucmlzZTIwNzUgb24gMjAxNy8yLzI2LlxyXG4gKi9cclxuLy8gQ3JlYXRlIGEgc3R5bGVzIGFycmF5IHRvIHVzZSB3aXRoIHRoZSBtYXAuXHJcbnZhciBzdHlsZXMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd3YXRlcicsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnIzE5YTBkOCcgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnYWRtaW5pc3RyYXRpdmUnLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuc3Ryb2tlJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZmZmZmZmJyB9LFxyXG4gICAgICAgICAgICB7IHdlaWdodDogNiB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdhZG1pbmlzdHJhdGl2ZScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5maWxsJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZTg1MTEzJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkLmhpZ2h3YXknLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnZ2VvbWV0cnkuc3Ryb2tlJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZWZlOWU0JyB9LFxyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogLTQwIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3RyYW5zaXQuc3RhdGlvbicsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IHdlaWdodDogOSB9LFxyXG4gICAgICAgICAgICB7IGh1ZTogJyNlODUxMTMnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQuaGlnaHdheScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMuaWNvbicsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IHZpc2liaWxpdHk6ICdvZmYnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LnN0cm9rZScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogMTAwIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3dhdGVyJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LmZpbGwnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IC0xMDAgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncG9pJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5JyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgdmlzaWJpbGl0eTogJ29uJyB9LFxyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2YwZTRkMycgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZC5oaWdod2F5JyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LmZpbGwnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNlZmU5ZTQnIH0sXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAtMjUgfVxyXG4gICAgICAgIF1cclxuICAgIH1cclxuXTtcclxuXHJcbi8vY2FjaGUgZ29vZ2xlIG1hcCBvYmplY3QgYXMgZ2xvYmFsIHZhcmlhYmxlXHJcbnZhciBtYXAgPSBudWxsO1xyXG4vLyBjYWNoZSBteSBnb29nbGUgbWFwIGFwaSBrZXlcclxudmFyIE1ZX0FQSV9LRVkgPSBcIkhXMWhnUU56MThUWVJSbjdCak42Qk9NQUx6Nmg1RzFDXCI7XHJcblxyXG4vL2NhY2hlIGluZm9XaW5kb3cgb2JqZWN0IGFzIGdsb2JhbCB2YXJpYWJsZVxyXG52YXIgaW5mb1dpbmRvdyA9IG51bGw7XHJcblxyXG52YXIgSU5JVF9aT09NX05VTSA9IDExO1xyXG52YXIgREVUQUlMX1pPT01fTlVNID0gMTQ7XHJcblxyXG4vL2dvb2dsZSBtYXAgQVBJIGNhbGxiYWNrIGZ1bmN0aW9uXHJcbmZ1bmN0aW9uIGluaXRNYXAoKXtcclxuXHJcbiAgICBtYXAgPSBuZXcgQk1hcC5NYXAoXCJtYXAtY2FudmFzXCIpOyAgICAgICAgICAvLyDliJvlu7rlnLDlm77lrp7kvotcclxuICAgIHZhciBwb2ludCA9IG5ldyBCTWFwLlBvaW50KGNlbnRlci5sb2NhdGlvbi5sbmcsIGNlbnRlci5sb2NhdGlvbi5sYXQpOyAgLy8g5Yib5bu654K55Z2Q5qCHXHJcbiAgICBtYXAuY2VudGVyQW5kWm9vbShwb2ludCwgSU5JVF9aT09NX05VTSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5OYXZpZ2F0aW9uQ29udHJvbCgpKTtcclxuICAgIG1hcC5hZGRDb250cm9sKG5ldyBCTWFwLk5hdmlnYXRpb25Db250cm9sKCkpO1xyXG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuU2NhbGVDb250cm9sKCkpO1xyXG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuT3ZlcnZpZXdNYXBDb250cm9sKCkpO1xyXG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuTWFwVHlwZUNvbnRyb2woKSk7XHJcbiAgICBtYXAuc2V0Q3VycmVudENpdHkoXCLmt7HlnLNcIik7IC8vIOS7heW9k+iuvue9ruWfjuW4guS/oeaBr+aXtu+8jE1hcFR5cGVDb250cm9s55qE5YiH5o2i5Yqf6IO95omN6IO95Y+v55SoXHJcblxyXG4gICAgdmFyIGxvY2FsID0gbmV3IEJNYXAuTG9jYWxTZWFyY2gobWFwLCB7XHJcbiAgICAgICAgcmVuZGVyT3B0aW9uczp7bWFwOiBtYXB9XHJcbiAgICB9KTtcclxuICAgIGxvY2FsLnNlYXJjaChcIue9l+a5lueBq+i9puermVwiKTtcclxuXHJcblxyXG4gICAgLy8gLy9pbml0aWFsaXplIG1hcmtlcnMgb24gdGhlIG1hcFxyXG4gICAgLy8gdmFyIG1hcmtlcnMgPSBbXTtcclxuICAgIC8vIGdlb0xvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxvYyl7XHJcbiAgICAvLyAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgLy8gICAgICAgICBwb3NpdGlvbjogbG9jLmxvY2F0aW9uLFxyXG4gICAgLy8gICAgICAgICBtYXA6IG1hcCxcclxuICAgIC8vICAgICAgICAgdGl0bGU6IGxvYy50aXRsZSxcclxuICAgIC8vICAgICAgICAgaWNvbjoge1xyXG4gICAgLy8gICAgICAgICAgICAgdXJsOiBsb2MuaWNvblxyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfSk7XHJcbiAgICAvLyAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gICAgICAgICAvL2hhdmUgdGhlICBtYXJrZXIgYm91bmNlIGZvciBhIGxpbWl0ZWQgdGltZXNcclxuICAgIC8vICAgICAgICAgbWFya2VyLnNldEFuaW1hdGlvbig0KTtcclxuICAgIC8vICAgICAgICAgb3BlbkluZm9XaW5kb3cobWFya2VyKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vICAgICBtYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICAgIC8vIH0pO1xyXG4gICAgLy9cclxuICAgIC8vIC8vaW52b2tlIGZ1bmN0aW9uIHRvIGFwcGx5IGtub2Nrb3V0IGJpbmRpbmdzXHJcbiAgICAvLyBpbml0S29WaWV3TW9kZWw0QXBwKG1hcmtlcnMpO1xyXG59XHJcblxyXG5pbml0TWFwKCk7XHJcblxyXG4vKlxyXG4qIEBkZXNjcmlwdGlvbjogb3BlbiBpbmZvIHdpbmRvdyBmb3JcclxuKiAgICAgICAgICAgICAgdGhlIGdpdmVuIGdvb2dsZSBtYXAgbWFya2VyXHJcbiogQHBhcmFtICBtYXJrZXIgdGhlIG9iamVjdCBvZiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBvcGVuSW5mb1dpbmRvdyhtYXJrZXIpe1xyXG5cclxuICAgIC8vY3JlYXRlIGFuIGluZm8gd2luZG93IG9iamVjdFxyXG4gICAgLy9vciBzZXQgY29udGVudCBvbiB0aGUgZXhpc3RpbmcgaW5mbyB3aW5kb3dcclxuICAgIC8vd2UgbmVlZG4ndCBjcmVhdGUgaW5mbyB3aW5kb3cgb2JqZWN0IHJlcGVhdGVkbHlcclxuICAgIGlmKCFpbmZvV2luZG93KXtcclxuICAgICAgICBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogbWFya2VyLmdldFBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIG1heFdpZHRoOiAzNTBcclxuICAgICAgICB9KTtcclxuICAgICAgICBpbmZvV2luZG93LmFkZExpc3RlbmVyKCdjbG9zZWNsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG4gICAgfVxyXG5cclxuICAgIGluZm9XaW5kb3cuc2V0Q29udGVudChcIlwiKTtcclxuICAgIGluZm9XaW5kb3cubWFya2VyID0gbWFya2VyO1xyXG4gICAgc2hvd0xvY2F0aW9uRGV0YWlsKG1hcmtlcik7XHJcbiAgICBpbmZvV2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xyXG5cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogcXVlcnkgZGV0YWlsZWQgaW5mb3JtYXRpb25cclxuICogZm9yIHRoZSBnaXZlbiBtYXJrZXIgYW5kIHNldCBjb250ZW50IGZvclxyXG4gKiBjdXJyZW50IGluZm8gd2luZG93XHJcbiAqIEBwYXJhbSAgbWFya2VyIHRoZSBvYmplY3Qgb2YgbWFya2VyXHJcbiAqIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIHNob3dMb2NhdGlvbkRldGFpbChtYXJrZXIpe1xyXG5cclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/bGF0bG5nPVwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubGF0KCkgK1xyXG4gICAgICAgIFwiLFwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubG5nKCkgK1xyXG4gICAgICAgIFwiJmtleT1cIiArXHJcbiAgICAgICAgTVlfQVBJX0tFWTtcclxuXHJcbiAgICAvL21ha2UgYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgYXBpXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybCA6IHVybFxyXG4gICAgICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgIHZhciBkZXRhaWxTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgaWYoZGF0YS5zdGF0dXMgPT09IFwiT0tcIil7XHJcbiAgICAgICAgICAgIHZhciBwbGFjZV9pZCA9IGRhdGEucmVzdWx0c1swXS5wbGFjZV9pZDtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2PuWcsOWdgElEOlwiICsgcGxhY2VfaWQgKyBcIjwvZGl2PlwiO1xyXG5cclxuICAgICAgICAgICB2YXIgZm9ybWF0dGVkX2FkZHJlc3MgPSBkYXRhLnJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3M7XHJcbiAgICAgICAgICAgZGV0YWlsU3RyaW5nICs9IFwiPGRpdj7or6bmg4U6XCIgKyBmb3JtYXR0ZWRfYWRkcmVzcyArIFwiPC9kaXY+XCI7XHJcblxyXG4gICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGRhdGEucmVzdWx0c1swXS5nZW9tZXRyeTtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Puexu+WeizpcIiArIGdlb21ldHJ5LmxvY2F0aW9uX3R5cGUgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+57qs5bqmOlwiICsgZ2VvbWV0cnkubG9jYXRpb24ubGF0ICsgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Pue7j+W6pjpcIiArIGdlb21ldHJ5LmxvY2F0aW9uLmxuZyArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGRldGFpbFN0cmluZyk7XHJcbiAgICAgICB9XHJcbiAgICAgICAgLy9kbyByZXNwb25zZSBlcnJvciBoYW5kbGluZ1xyXG4gICAgfSkuZmFpbChmdW5jdGlvbihqcVhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcInRleHRTdGF0dXM6XCIgKyB0ZXh0U3RhdHVzICsgXCIsIGVycm9yVGhyb3duOlwiICtlcnJvclRocm93bik7XHJcbiAgICAgICAgLy9kbyBhamF4IGxvZ2dpbmcgb24gdGhlIGJyb3dzZXIgY29uc29sZVxyXG4gICAgfSkuYWx3YXlzIChmdW5jdGlvbihqcVhIUk9yRGF0YSwgdGV4dFN0YXR1cywganFYSFJPckVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwiYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgaXMgY29tcGxldGVkLCB0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8vYWRkIGdsb2JhbCBhcnJheSBmb3IgY29mZmVlIHNob3AgbWFya2Vyc1xyXG52YXIgY29mZmVlU2hvcE1hcmtlcnMgPSBbXTtcclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiBsb2FkIGNvZmZlZSBzaG9wIGluZm9ybWF0aW9uXHJcbiogICAgICAgICAgICAgICBieSBmb3Vyc3F1YXJlIGFwaVxyXG4qIEBwYXJhbSBtYXJrZXI6IHRoZSBjbGlja2VkIG1hcmtlciBvYmplY3RcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiBsb2FkQ29mZmVlU2hvcEluZm8obWFya2VyKXtcclxuICAgIC8vY2xlYXIgb2xkIG1hcmtlcnNcclxuICAgIGNvZmZlZVNob3BNYXJrZXJzLmZvckVhY2goZnVuY3Rpb24oY29mZmVlQmFyTWFya2VyKXtcclxuICAgICAgICBjb2ZmZWVCYXJNYXJrZXIuc2V0TWFwKG51bGwpO1xyXG4gICAgfSk7XHJcbiAgICAvL2dyYW50IHBlcm1pc3Npb24gb2YgcmVjeWNsaW5nIHRoZSBvbGQtZmFzaGlvbmVkIG9iamVjdHMgdG8ganMgZW5naW5lXHJcbiAgICBjb2ZmZWVTaG9wTWFya2Vycy5sZW5ndGggPSAwO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIG5laWdoYm9yaG9vZC1tYXBcclxuICAgICBBcHAgSW5mb3JtYXRpb25cclxuICAgICogKi9cclxuICAgIHZhciBjbGllbnRJZCA9ICdYQkVWUldNMUpHWU9CMldTNUxNUE0zNUJKWkZBQU5PVEFQRUVHTk5IUTUyQkRPWFYnO1xyXG4gICAgdmFyIGNsaWVudFNlY3JldCA9ICdQMVhCWFRTQUdPS0FXTUdZSU1IT0FMRzFOU0JQT0pZVlpMVUFENVJTUUVHSjNNTjUnO1xyXG5cclxuICAgIC8qXHJcbiAgICAqIGNvbmNhdGVuYXRlIHRoZSByZXF1ZXN0IHVybCBzdHJpbmdcclxuICAgICogKi9cclxuICAgIHZhciBiYXNlVXJsID0gXCJodHRwczovL2FwaS5mb3Vyc3F1YXJlLmNvbS92Mi92ZW51ZXMvZXhwbG9yZT9cIjtcclxuICAgIHZhciBxdWVyeVBhcmFtcyA9IFwibGw9XCIrIG1hcmtlci5wb3NpdGlvbi5sYXQoKSArXCIlMkNcIisgbWFya2VyLnBvc2l0aW9uLmxuZygpICtcIiZzZWN0aW9uPWNvZmZlZSZsaW1pdD0xMCZub3ZlbHR5PW5ld1wiO1xyXG4gICAgdmFyIHVzZXJJbmZvID0gJyZjbGllbnRfaWQ9JyArIGNsaWVudElkICsgJyZjbGllbnRfc2VjcmV0PScgKyBjbGllbnRTZWNyZXQgKyBcIiZ2PTIwMTcwMzA4XCI7XHJcbiAgICB2YXIgdXJsID0gYmFzZVVybCArIHF1ZXJ5UGFyYW1zICsgdXNlckluZm87XHJcblxyXG4gICAgLy9tYWtlIGFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGFwaVxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmwgOiB1cmxcclxuICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gZGF0YS5yZXNwb25zZS5ncm91cHNbMF0uaXRlbXM7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgICAgIHZhciB2ZW51ZSA9IGl0ZW0udmVudWU7XHJcbiAgICAgICAgICAgICAgICAvLyBwbGFjZSB0aGUgYSBtYXJrZXIgb24gdGhlIG1hcFxyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHZlbnVlLmxvY2F0aW9uLmxhdCx2ZW51ZS5sb2NhdGlvbi5sbmcpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB2ZW51ZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246IHsvL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiLi9kaXN0L2ltYWdlcy9jb2ZmZWUtbi10ZWEucG5nXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2hhdmUgdGhlICBtYXJrZXIgYm91bmNlIGZvciBhIGxpbWl0ZWQgdGltZXNcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuc2V0QW5pbWF0aW9uKDQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZW5JbmZvV2luZG93KG1hcmtlcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvZmZlZVNob3BNYXJrZXJzLnB1c2gobWFya2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAvL2RvIHJlc3BvbnNlIGVycm9yIGhhbmRsaW5nXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwidGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMgKyBcIiwgZXJyb3JUaHJvd246XCIgK2Vycm9yVGhyb3duKTtcclxuICAgIC8vZG8gYWpheCBsb2dnaW5nIG9uIHRoZSBicm93c2VyIGNvbnNvbGVcclxuICAgIH0pLmFsd2F5cyAoZnVuY3Rpb24oanFYSFJPckRhdGEsIHRleHRTdGF0dXMsIGpxWEhST3JFcnJvclRocm93bikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcImFqYXggcmVxdWVzdCB0byBmb3Vyc3F1YXJlIGlzIGNvbXBsZXRlZCwgdGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiB6b29tIGluIGFuZCBzZXQgY2VudGVyIG9mIHRoZSBtYXBcclxuKiBAcGFyYW0gbWFya2VyIHRoZSBnaXZlbiBtYXJrZXJcclxuKiBAcmV0dXJuIHZvaWRcclxuKiAqL1xyXG5mdW5jdGlvbiB6b29tSW4yTWFya2VyKG1hcmtlcil7XHJcbiAgICBtYXAuc2V0Q2VudGVyKG1hcmtlci5nZXRQb3NpdGlvbigpKTtcclxuICAgIG1hcC5zZXRab29tKERFVEFJTF9aT09NX05VTSk7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogem9vbSBvdXQgdG8gdGhlIGluaXRpYWwgc3RhdGUgb2YgZ29vZ2xlIG1hcFxyXG4gKiBAcGFyYW0gbm9uZVxyXG4gKiBAcmV0dXJuIHZvaWRcclxuICogKi9cclxuZnVuY3Rpb24gem9vbU91dDJJbml0U3RhdHVzKCl7XHJcbiAgICBtYXAuc2V0Q2VudGVyKGNlbnRlci5sb2NhdGlvbik7XHJcbiAgICBtYXAuc2V0Wm9vbShJTklUX1pPT01fTlVNKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
