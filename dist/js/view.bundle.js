function initMap(){map=new BMap.Map("map-canvas"),localSearch4Map=new BMap.LocalSearch(map,{renderOptions:{map:map}}),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.ScaleControl),map.addControl(new BMap.OverviewMapControl),map.addControl(new BMap.MapTypeControl),map.setCurrentCity(currentCity),map.enableScrollWheelZoom(),map.enableKeyboard();var e=new BMap.Point(center.location.lng,center.location.lat);map.centerAndZoom(e,INIT_ZOOM_NUM),window.setTimeout(function(){map.panTo(e)},2e3);var o=0;geoLocations.forEach(function(e){var t=new BMap.Point(e.location.lng,e.location.lat),n=new BMap.Marker(t,{title:e.title});n.enableDragging(),n.addEventListener("click",function(e){openInfoWindow(t)}),map.addOverlay(n),markers.push(n),o++})}function openInfoWindow(e,o,t){if(!infoWindow){var n={width:250,height:100,title:"Hello"};infoWindow=new BMap.InfoWindow("World",n)}map.openInfoWindow(infoWindow,e)}function showLocationDetail(e){var o="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.position.lat()+","+e.position.lng()+"&key="+MY_API_KEY;$.ajax({url:o}).done(function(e,o,t){console.log(e);var n="";if("OK"===e.status){var a=e.results[0].place_id;n+="<div>地址ID:"+a+"</div>";var i=e.results[0].formatted_address;n+="<div>详情:"+i+"</div>";var l=e.results[0].geometry;n+="<div>类型:"+l.location_type+"</div>",n+="<div>纬度:"+l.location.lat+"</div>",n+="<div>经度:"+l.location.lng+"</div>",infoWindow.setContent(n)}}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function loadCoffeeShopInfo(e){coffeeShopMarkers.forEach(function(e){e.setMap(null)}),coffeeShopMarkers.length=0;var o="XBEVRWM1JGYOB2WS5LMPM35BJZFAANOTAPEEGNNHQ52BDOXV",t="P1XBXTSAGOKAWMGYIMHOALG1NSBPOJYVZLUAD5RSQEGJ3MN5",n="https://api.foursquare.com/v2/venues/explore?",a="ll="+e.position.lat()+"%2C"+e.position.lng()+"&section=coffee&limit=10&novelty=new",i="&client_id="+o+"&client_secret="+t+"&v=20170308",l=n+a+i;$.ajax({url:l}).done(function(e,o,t){var n=e.response.groups[0].items;n.forEach(function(e){var o=e.venue,t=new google.maps.Marker({position:new google.maps.LatLng(o.location.lat,o.location.lng),map:map,title:o.name,icon:{url:"./dist/images/coffee-n-tea.png"}});t.addListener("click",function(){t.setAnimation(4),openInfoWindow(t)}),coffeeShopMarkers.push(t)})}).fail(function(e,o,t){console.log("textStatus:"+o+", errorThrown:"+t)}).always(function(e,o,t){console.log("ajax request to foursquare is completed, textStatus:"+o)})}function zoomIn2Marker(e){map.centerAndZoom(e.z.point,DETAIL_ZOOM_NUM)}function zoomOut2InitStatus(){map.setCenter(center.location),map.setZoom(INIT_ZOOM_NUM)}function searchPlaces(e,o){}var styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}],currentCity="深圳",map=null,localSearch4Map=null,markers=[],MY_API_KEY="HW1hgQNz18TYRRn7BjN6BOMALz6h5G1C",infoWindow=null,INIT_ZOOM_NUM=11,DETAIL_ZOOM_NUM=14;initMap();var coffeeShopMarkers=[];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC52aWV3LmpzIl0sIm5hbWVzIjpbImluaXRNYXAiLCJtYXAiLCJCTWFwIiwiTWFwIiwibG9jYWxTZWFyY2g0TWFwIiwiTG9jYWxTZWFyY2giLCJyZW5kZXJPcHRpb25zIiwiYWRkQ29udHJvbCIsIk5hdmlnYXRpb25Db250cm9sIiwiU2NhbGVDb250cm9sIiwiT3ZlcnZpZXdNYXBDb250cm9sIiwiTWFwVHlwZUNvbnRyb2wiLCJzZXRDdXJyZW50Q2l0eSIsImN1cnJlbnRDaXR5IiwiZW5hYmxlU2Nyb2xsV2hlZWxab29tIiwiZW5hYmxlS2V5Ym9hcmQiLCJwb2ludCIsIlBvaW50IiwiY2VudGVyIiwibG9jYXRpb24iLCJsbmciLCJsYXQiLCJjZW50ZXJBbmRab29tIiwiSU5JVF9aT09NX05VTSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJwYW5UbyIsImluZGV4IiwiZ2VvTG9jYXRpb25zIiwiZm9yRWFjaCIsImxvYyIsIm1hcmtlciIsIk1hcmtlciIsInRpdGxlIiwiZW5hYmxlRHJhZ2dpbmciLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm9wZW5JbmZvV2luZG93IiwiYWRkT3ZlcmxheSIsIm1hcmtlcnMiLCJwdXNoIiwiY29udGVudCIsImluZm9XaW5kb3ciLCJvcHRzIiwid2lkdGgiLCJoZWlnaHQiLCJJbmZvV2luZG93Iiwic2hvd0xvY2F0aW9uRGV0YWlsIiwidXJsIiwicG9zaXRpb24iLCJNWV9BUElfS0VZIiwiJCIsImFqYXgiLCJkb25lIiwiZGF0YSIsInRleHRTdGF0dXMiLCJqcVhociIsImNvbnNvbGUiLCJsb2ciLCJkZXRhaWxTdHJpbmciLCJzdGF0dXMiLCJwbGFjZV9pZCIsInJlc3VsdHMiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsImdlb21ldHJ5IiwibG9jYXRpb25fdHlwZSIsInNldENvbnRlbnQiLCJmYWlsIiwiZXJyb3JUaHJvd24iLCJhbHdheXMiLCJqcVhIUk9yRGF0YSIsImpxWEhST3JFcnJvclRocm93biIsImxvYWRDb2ZmZWVTaG9wSW5mbyIsImNvZmZlZVNob3BNYXJrZXJzIiwiY29mZmVlQmFyTWFya2VyIiwic2V0TWFwIiwibGVuZ3RoIiwiY2xpZW50SWQiLCJjbGllbnRTZWNyZXQiLCJiYXNlVXJsIiwicXVlcnlQYXJhbXMiLCJ1c2VySW5mbyIsIml0ZW1zIiwicmVzcG9uc2UiLCJncm91cHMiLCJpdGVtIiwidmVudWUiLCJnb29nbGUiLCJtYXBzIiwiTGF0TG5nIiwibmFtZSIsImljb24iLCJhZGRMaXN0ZW5lciIsInNldEFuaW1hdGlvbiIsInpvb21JbjJNYXJrZXIiLCJ6IiwiREVUQUlMX1pPT01fTlVNIiwiem9vbU91dDJJbml0U3RhdHVzIiwic2V0Q2VudGVyIiwic2V0Wm9vbSIsInNlYXJjaFBsYWNlcyIsImtleVdvcmRzIiwic3R5bGVzIiwiZmVhdHVyZVR5cGUiLCJzdHlsZXJzIiwiY29sb3IiLCJlbGVtZW50VHlwZSIsIndlaWdodCIsImxpZ2h0bmVzcyIsImh1ZSIsInZpc2liaWxpdHkiXSwibWFwcGluZ3MiOiJBQTJGQSxRQUFBQSxXQUVBQyxJQUFBLEdBQUFDLE1BQUFDLElBQUEsY0FFQUMsZ0JBQUEsR0FBQUYsTUFBQUcsWUFBQUosS0FDQUssZUFBQUwsSUFBQUEsT0FHQUEsSUFBQU0sV0FBQSxHQUFBTCxNQUFBTSxtQkFDQVAsSUFBQU0sV0FBQSxHQUFBTCxNQUFBTSxtQkFDQVAsSUFBQU0sV0FBQSxHQUFBTCxNQUFBTyxjQUNBUixJQUFBTSxXQUFBLEdBQUFMLE1BQUFRLG9CQUNBVCxJQUFBTSxXQUFBLEdBQUFMLE1BQUFTLGdCQUNBVixJQUFBVyxlQUFBQyxhQUNBWixJQUFBYSx3QkFDQWIsSUFBQWMsZ0JBR0EsSUFBQUMsR0FBQSxHQUFBZCxNQUFBZSxNQUFBQyxPQUFBQyxTQUFBQyxJQUFBRixPQUFBQyxTQUFBRSxJQUNBcEIsS0FBQXFCLGNBQUFOLEVBQUFPLGVBQ0FDLE9BQUFDLFdBQUEsV0FDQXhCLElBQUF5QixNQUFBVixJQUNBLElBTUEsSUFBQVcsR0FBQSxDQUNBQyxjQUFBQyxRQUFBLFNB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aEYsT0FBQUMsVUFDQWxCLElBQUFrRyxRQUFBNUUsZUFJQSxRQUFBNkUsY0FBQXJFLEVBQUFzRSxJQXpTQSxHQUFBQyxVQUVBQyxZQUFBLFFBQ0FDLFVBQ0FDLE1BQUEsY0FHQUYsWUFBQSxpQkFDQUcsWUFBQSxxQkFDQUYsVUFDQUMsTUFBQSxZQUNBRSxPQUFBLE1BR0FKLFlBQUEsaUJBQ0FHLFlBQUEsbUJBQ0FGLFVBQ0FDLE1BQUEsY0FHQUYsWUFBQSxlQUNBRyxZQUFBLGtCQUNBRixVQUNBQyxNQUFBLFlBQ0FHLFdBQUEsT0FHQUwsWUFBQSxrQkFDQUMsVUFDQUcsT0FBQSxJQUNBRSxJQUFBLGNBR0FOLFlBQUEsZUFDQUcsWUFBQSxjQUNBRixVQUNBTSxXQUFBLFVBR0FQLFlBQUEsUUFDQUcsWUFBQSxxQkFDQUYsVUFDQUksVUFBQSxRQUdBTCxZQUFBLFFBQ0FHLFlBQUEsbUJBQ0FGLFVBQ0FJLFdBQUEsUUFHQUwsWUFBQSxNQUNBRyxZQUFBLFdBQ0FGLFVBQ0FNLFdBQUEsT0FDQUwsTUFBQSxjQUdBRixZQUFBLGVBQ0FHLFlBQUEsZ0JBQ0FGLFVBQ0FDLE1BQUEsWUFDQUcsV0FBQSxPQU1BL0YsWUFBQSxLQUdBWixJQUFBLEtBRUFHLGdCQUFBLEtBRUFtQyxXQUdBVyxXQUFBLG1DQUdBUixXQUFBLEtBRUFuQixjQUFBLEdBQ0F5RSxnQkFBQSxFQW9EQWhHLFVBNEVBLElBQUF5RSIsImZpbGUiOiJ2aWV3LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHN1bnJpc2UyMDc1IG9uIDIwMTcvMi8yNi5cclxuICovXHJcbi8vIENyZWF0ZSBhIHN0eWxlcyBhcnJheSB0byB1c2Ugd2l0aCB0aGUgbWFwLlxyXG52YXIgc3R5bGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyMxOWEwZDgnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ2FkbWluaXN0cmF0aXZlJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LnN0cm9rZScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2ZmZmZmZicgfSxcclxuICAgICAgICAgICAgeyB3ZWlnaHQ6IDYgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnYWRtaW5pc3RyYXRpdmUnLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2U4NTExMycgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZC5oaWdod2F5JyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LnN0cm9rZScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2VmZTllNCcgfSxcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IC00MCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd0cmFuc2l0LnN0YXRpb24nLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB3ZWlnaHQ6IDkgfSxcclxuICAgICAgICAgICAgeyBodWU6ICcjZTg1MTEzJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkLmhpZ2h3YXknLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLmljb24nLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB2aXNpYmlsaXR5OiAnb2ZmJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd3YXRlcicsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IDEwMCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd3YXRlcicsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5maWxsJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAtMTAwIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3BvaScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IHZpc2liaWxpdHk6ICdvbicgfSxcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNmMGU0ZDMnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQuaGlnaHdheScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5maWxsJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZWZlOWU0JyB9LFxyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogLTI1IH1cclxuICAgICAgICBdXHJcbiAgICB9XHJcbl07XHJcblxyXG4vL2N1cnJlbnQgY2l0eSBnb3IgQmFpRHUgbWFwXHJcbnZhciBjdXJyZW50Q2l0eSA9IFwi5rex5ZyzXCI7XHJcblxyXG4vL2NhY2hlIGdvb2dsZSBtYXAgb2JqZWN0IGFzIGdsb2JhbCB2YXJpYWJsZVxyXG52YXIgbWFwID0gbnVsbDtcclxuXHJcbnZhciBsb2NhbFNlYXJjaDRNYXAgPSBudWxsO1xyXG5cclxudmFyIG1hcmtlcnMgPSBbXTtcclxuXHJcbi8vIGNhY2hlIG15IGdvb2dsZSBtYXAgYXBpIGtleVxyXG52YXIgTVlfQVBJX0tFWSA9IFwiSFcxaGdRTnoxOFRZUlJuN0JqTjZCT01BTHo2aDVHMUNcIjtcclxuXHJcbi8vY2FjaGUgaW5mb1dpbmRvdyBvYmplY3QgYXMgZ2xvYmFsIHZhcmlhYmxlXHJcbnZhciBpbmZvV2luZG93ID0gbnVsbDtcclxuXHJcbnZhciBJTklUX1pPT01fTlVNID0gMTE7XHJcbnZhciBERVRBSUxfWk9PTV9OVU0gPSAxNDtcclxuXHJcbi8vZ29vZ2xlIG1hcCBBUEkgY2FsbGJhY2sgZnVuY3Rpb25cclxuZnVuY3Rpb24gaW5pdE1hcCgpe1xyXG5cclxuICAgIG1hcCA9IG5ldyBCTWFwLk1hcChcIm1hcC1jYW52YXNcIik7IC8vIOWIm+W7uuWcsOWbvuWunuS+i1xyXG4gICAgLy/lop7liqDlnLDlm77mkJzntKLlip/og71cclxuICAgIGxvY2FsU2VhcmNoNE1hcCA9IG5ldyBCTWFwLkxvY2FsU2VhcmNoKG1hcCwge1xyXG4gICAgICAgIHJlbmRlck9wdGlvbnM6e21hcDogbWFwfVxyXG4gICAgfSk7XHJcbiAgICAvLyDnu7TlnLDlm77lop7liqDmjqfliLbnu4Tku7ZcclxuICAgIG1hcC5hZGRDb250cm9sKG5ldyBCTWFwLk5hdmlnYXRpb25Db250cm9sKCkpO1xyXG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuTmF2aWdhdGlvbkNvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5TY2FsZUNvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5PdmVydmlld01hcENvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5NYXBUeXBlQ29udHJvbCgpKTtcclxuICAgIG1hcC5zZXRDdXJyZW50Q2l0eShjdXJyZW50Q2l0eSk7IC8vIOS7heW9k+iuvue9ruWfjuW4guS/oeaBr+aXtu+8jE1hcFR5cGVDb250cm9s55qE5YiH5o2i5Yqf6IO95omN6IO95Y+v55SoXHJcbiAgICBtYXAuZW5hYmxlU2Nyb2xsV2hlZWxab29tKCk7Ly/lkK/liqjpvKDmoIfmu5rova7nvKnmlL7lnLDlm75cclxuICAgIG1hcC5lbmFibGVLZXlib2FyZCgpOy8v5ZCv5Yqo6ZSu55uY5pON5L2c5Zyw5Zu+XHJcblxyXG4gICAgLy8g5L2/55So5Zyw54K555qE57uP5bqm5ZKM57qs5bqmLOWIm+W7uueCueWdkOagh1xyXG4gICAgdmFyIHBvaW50ID0gbmV3IEJNYXAuUG9pbnQoY2VudGVyLmxvY2F0aW9uLmxuZywgY2VudGVyLmxvY2F0aW9uLmxhdCk7XHJcbiAgICBtYXAuY2VudGVyQW5kWm9vbShwb2ludCwgSU5JVF9aT09NX05VTSk7XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIG1hcC5wYW5Ubyhwb2ludCk7XHJcbiAgICB9LCAyMDAwKTtcclxuXHJcbiAgICAvL+WcqOWcsOWbvuS4iui/veWKoOWbvuagh1xyXG4gICAgLy8gdmFyIG1hcmtlciA9IG5ldyBCTWFwLk1hcmtlcihwb2ludCk7XHJcbiAgICAvLyBtYXAuYWRkT3ZlcmxheShtYXJrZXIpO1xyXG5cclxuICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICBnZW9Mb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihsb2Mpe1xyXG4gICAgICAgIC8vIOWQkeWcsOWbvua3u+WKoOagh+azqFxyXG4gICAgICAgIHZhciBwb2ludCA9IG5ldyBCTWFwLlBvaW50KGxvYy5sb2NhdGlvbi5sbmcsXHJcbiAgICAgICAgICAgIGxvYy5sb2NhdGlvbi5sYXQpO1xyXG4gICAgICAgIC8vIOWIm+W7uuagh+azqOWvueixoeW5tua3u+WKoOWIsOWcsOWbvlxyXG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgQk1hcC5NYXJrZXIocG9pbnQsIHtcclxuICAgICAgICAgICAgdGl0bGU6IGxvYy50aXRsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1hcmtlci5lbmFibGVEcmFnZ2luZygpO1xyXG4gICAgICAgIG1hcmtlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIG9wZW5JbmZvV2luZG93KHBvaW50KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIG1hcC5hZGRPdmVybGF5KG1hcmtlcik7XHJcbiAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7XHJcbiAgICAgICAgaW5kZXgrKztcclxuICAgIH0pO1xyXG5cclxuXHJcbn1cclxuXHJcbmluaXRNYXAoKTtcclxuXHJcbi8qXHJcbiogQGRlc2NyaXB0aW9uOiBvcGVuIGluZm8gd2luZG93IGZvclxyXG4qICAgICAgICAgICAgICB0aGUgZ2l2ZW4gZ29vZ2xlIG1hcCBtYXJrZXJcclxuKiBAcGFyYW0gIG1hcmtlciB0aGUgb2JqZWN0IG9mIG1hcmtlclxyXG4qIEBwYXJhbSB0aXRsZVxyXG4qIEBwYXJhbSBjb250ZW50XHJcbiogQHJldHVybiB2b2lkXHJcbiogKi9cclxuZnVuY3Rpb24gb3BlbkluZm9XaW5kb3cocG9pbnQsIHRpdGxlLCBjb250ZW50KXtcclxuICAgIC8vY3JlYXRlIGFuIGluZm8gd2luZG93IG9iamVjdFxyXG4gICAgLy9vciBzZXQgY29udGVudCBvbiB0aGUgZXhpc3RpbmcgaW5mbyB3aW5kb3dcclxuICAgIC8vd2UgbmVlZG4ndCBjcmVhdGUgaW5mbyB3aW5kb3cgb2JqZWN0IHJlcGVhdGVkbHlcclxuICAgIGlmKCFpbmZvV2luZG93KXtcclxuICAgICAgICB2YXIgb3B0cyA9IHtcclxuICAgICAgICAgICAgd2lkdGggOiAyNTAsICAgICAvLyDkv6Hmga/nqpflj6Plrr3luqZcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAsICAgICAvLyDkv6Hmga/nqpflj6Ppq5jluqZcclxuICAgICAgICAgICAgdGl0bGUgOiBcIkhlbGxvXCIgIC8vIOS/oeaBr+eql+WPo+agh+mimFxyXG4gICAgICAgIH1cclxuICAgICAgICBpbmZvV2luZG93ID0gbmV3IEJNYXAuSW5mb1dpbmRvdyhcIldvcmxkXCIsIG9wdHMpOyAgLy8g5Yib5bu65L+h5oGv56qX5Y+j5a+56LGhXHJcblxyXG4gICAgfVxyXG4gICAgbWFwLm9wZW5JbmZvV2luZG93KGluZm9XaW5kb3csIHBvaW50KTsgICAgICAvLyDmiZPlvIDkv6Hmga/nqpflj6NcclxuXHJcblxyXG59XHJcblxyXG5cclxuLypcclxuICogQGRlc2NyaXB0aW9uOiBxdWVyeSBkZXRhaWxlZCBpbmZvcm1hdGlvblxyXG4gKiBmb3IgdGhlIGdpdmVuIG1hcmtlciBhbmQgc2V0IGNvbnRlbnQgZm9yXHJcbiAqIGN1cnJlbnQgaW5mbyB3aW5kb3dcclxuICogQHBhcmFtICBtYXJrZXIgdGhlIG9iamVjdCBvZiBtYXJrZXJcclxuICogQHJldHVybiB2b2lkXHJcbiogKi9cclxuZnVuY3Rpb24gc2hvd0xvY2F0aW9uRGV0YWlsKG1hcmtlcil7XHJcblxyXG4gICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9sYXRsbmc9XCIgK1xyXG4gICAgICAgIG1hcmtlci5wb3NpdGlvbi5sYXQoKSArXHJcbiAgICAgICAgXCIsXCIgK1xyXG4gICAgICAgIG1hcmtlci5wb3NpdGlvbi5sbmcoKSArXHJcbiAgICAgICAgXCIma2V5PVwiICtcclxuICAgICAgICBNWV9BUElfS0VZO1xyXG5cclxuICAgIC8vbWFrZSBhamF4IHJlcXVlc3QgdG8gZm91cnNxdWFyZSBhcGlcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdXJsIDogdXJsXHJcbiAgICAgICAgLy9kbyByZXNwb25zZSBzdWNjZXNzIGhhbmRsaW5nXHJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWGhyKXtcclxuICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgdmFyIGRldGFpbFN0cmluZyA9IFwiXCI7XHJcbiAgICAgICBpZihkYXRhLnN0YXR1cyA9PT0gXCJPS1wiKXtcclxuICAgICAgICAgICAgdmFyIHBsYWNlX2lkID0gZGF0YS5yZXN1bHRzWzBdLnBsYWNlX2lkO1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+5Zyw5Z2ASUQ6XCIgKyBwbGFjZV9pZCArIFwiPC9kaXY+XCI7XHJcblxyXG4gICAgICAgICAgIHZhciBmb3JtYXR0ZWRfYWRkcmVzcyA9IGRhdGEucmVzdWx0c1swXS5mb3JtYXR0ZWRfYWRkcmVzcztcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2PuivpuaDhTpcIiArIGZvcm1hdHRlZF9hZGRyZXNzICsgXCI8L2Rpdj5cIjtcclxuXHJcbiAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gZGF0YS5yZXN1bHRzWzBdLmdlb21ldHJ5O1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+57G75Z6LOlwiICsgZ2VvbWV0cnkubG9jYXRpb25fdHlwZSArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgZGV0YWlsU3RyaW5nICs9IFwiPGRpdj7nuqzluqY6XCIgKyBnZW9tZXRyeS5sb2NhdGlvbi5sYXQgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+57uP5bqmOlwiICsgZ2VvbWV0cnkubG9jYXRpb24ubG5nICsgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoZGV0YWlsU3RyaW5nKTtcclxuICAgICAgIH1cclxuICAgICAgICAvL2RvIHJlc3BvbnNlIGVycm9yIGhhbmRsaW5nXHJcbiAgICB9KS5mYWlsKGZ1bmN0aW9uKGpxWGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwidGV4dFN0YXR1czpcIiArIHRleHRTdGF0dXMgKyBcIiwgZXJyb3JUaHJvd246XCIgK2Vycm9yVGhyb3duKTtcclxuICAgICAgICAvL2RvIGFqYXggbG9nZ2luZyBvbiB0aGUgYnJvd3NlciBjb25zb2xlXHJcbiAgICB9KS5hbHdheXMgKGZ1bmN0aW9uKGpxWEhST3JEYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUk9yRXJyb3JUaHJvd24pIHtcclxuICAgICAgICBjb25zb2xlLmxvZyggXCJhamF4IHJlcXVlc3QgdG8gZm91cnNxdWFyZSBpcyBjb21wbGV0ZWQsIHRleHRTdGF0dXM6XCIgKyB0ZXh0U3RhdHVzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuLy9hZGQgZ2xvYmFsIGFycmF5IGZvciBjb2ZmZWUgc2hvcCBtYXJrZXJzXHJcbnZhciBjb2ZmZWVTaG9wTWFya2VycyA9IFtdO1xyXG5cclxuLypcclxuKiBAZGVzY3JpcHRpb246IGxvYWQgY29mZmVlIHNob3AgaW5mb3JtYXRpb25cclxuKiAgICAgICAgICAgICAgIGJ5IGZvdXJzcXVhcmUgYXBpXHJcbiogQHBhcmFtIG1hcmtlcjogdGhlIGNsaWNrZWQgbWFya2VyIG9iamVjdFxyXG4qIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIGxvYWRDb2ZmZWVTaG9wSW5mbyhtYXJrZXIpe1xyXG4gICAgLy9jbGVhciBvbGQgbWFya2Vyc1xyXG4gICAgY29mZmVlU2hvcE1hcmtlcnMuZm9yRWFjaChmdW5jdGlvbihjb2ZmZWVCYXJNYXJrZXIpe1xyXG4gICAgICAgIGNvZmZlZUJhck1hcmtlci5zZXRNYXAobnVsbCk7XHJcbiAgICB9KTtcclxuICAgIC8vZ3JhbnQgcGVybWlzc2lvbiBvZiByZWN5Y2xpbmcgdGhlIG9sZC1mYXNoaW9uZWQgb2JqZWN0cyB0byBqcyBlbmdpbmVcclxuICAgIGNvZmZlZVNob3BNYXJrZXJzLmxlbmd0aCA9IDA7XHJcblxyXG4gICAgLypcclxuICAgICogbmVpZ2hib3Job29kLW1hcFxyXG4gICAgIEFwcCBJbmZvcm1hdGlvblxyXG4gICAgKiAqL1xyXG4gICAgdmFyIGNsaWVudElkID0gJ1hCRVZSV00xSkdZT0IyV1M1TE1QTTM1QkpaRkFBTk9UQVBFRUdOTkhRNTJCRE9YVic7XHJcbiAgICB2YXIgY2xpZW50U2VjcmV0ID0gJ1AxWEJYVFNBR09LQVdNR1lJTUhPQUxHMU5TQlBPSllWWkxVQUQ1UlNRRUdKM01ONSc7XHJcblxyXG4gICAgLypcclxuICAgICogY29uY2F0ZW5hdGUgdGhlIHJlcXVlc3QgdXJsIHN0cmluZ1xyXG4gICAgKiAqL1xyXG4gICAgdmFyIGJhc2VVcmwgPSBcImh0dHBzOi8vYXBpLmZvdXJzcXVhcmUuY29tL3YyL3ZlbnVlcy9leHBsb3JlP1wiO1xyXG4gICAgdmFyIHF1ZXJ5UGFyYW1zID0gXCJsbD1cIisgbWFya2VyLnBvc2l0aW9uLmxhdCgpICtcIiUyQ1wiKyBtYXJrZXIucG9zaXRpb24ubG5nKCkgK1wiJnNlY3Rpb249Y29mZmVlJmxpbWl0PTEwJm5vdmVsdHk9bmV3XCI7XHJcbiAgICB2YXIgdXNlckluZm8gPSAnJmNsaWVudF9pZD0nICsgY2xpZW50SWQgKyAnJmNsaWVudF9zZWNyZXQ9JyArIGNsaWVudFNlY3JldCArIFwiJnY9MjAxNzAzMDhcIjtcclxuICAgIHZhciB1cmwgPSBiYXNlVXJsICsgcXVlcnlQYXJhbXMgKyB1c2VySW5mbztcclxuXHJcbiAgICAvL21ha2UgYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgYXBpXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybCA6IHVybFxyXG4gICAgLy9kbyByZXNwb25zZSBzdWNjZXNzIGhhbmRsaW5nXHJcbiAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWGhyKXtcclxuICAgICAgICB2YXIgaXRlbXMgPSBkYXRhLnJlc3BvbnNlLmdyb3Vwc1swXS5pdGVtcztcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgdmFyIHZlbnVlID0gaXRlbS52ZW51ZTtcclxuICAgICAgICAgICAgICAgIC8vIHBsYWNlIHRoZSBhIG1hcmtlciBvbiB0aGUgbWFwXHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBnb29nbGUubWFwcy5MYXRMbmcodmVudWUubG9jYXRpb24ubGF0LHZlbnVlLmxvY2F0aW9uLmxuZyksXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwOiBtYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHZlbnVlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogey8vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogXCIuL2Rpc3QvaW1hZ2VzL2NvZmZlZS1uLXRlYS5wbmdcIlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGF2ZSB0aGUgIG1hcmtlciBib3VuY2UgZm9yIGEgbGltaXRlZCB0aW1lc1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5zZXRBbmltYXRpb24oNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlbkluZm9XaW5kb3cobWFya2VyKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29mZmVlU2hvcE1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIC8vZG8gcmVzcG9uc2UgZXJyb3IgaGFuZGxpbmdcclxuICAgIH0pLmZhaWwoZnVuY3Rpb24oanFYaHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKXtcclxuICAgICAgICBjb25zb2xlLmxvZyggXCJ0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyArIFwiLCBlcnJvclRocm93bjpcIiArZXJyb3JUaHJvd24pO1xyXG4gICAgLy9kbyBhamF4IGxvZ2dpbmcgb24gdGhlIGJyb3dzZXIgY29uc29sZVxyXG4gICAgfSkuYWx3YXlzIChmdW5jdGlvbihqcVhIUk9yRGF0YSwgdGV4dFN0YXR1cywganFYSFJPckVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwiYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgaXMgY29tcGxldGVkLCB0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuKiBAZGVzY3JpcHRpb246IHpvb20gaW4gYW5kIHNldCBjZW50ZXIgb2YgdGhlIG1hcFxyXG4qIEBwYXJhbSBtYXJrZXIgdGhlIGdpdmVuIG1hcmtlclxyXG4qIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIHpvb21JbjJNYXJrZXIobWFya2VyKXtcclxuICAgIG1hcC5jZW50ZXJBbmRab29tKG1hcmtlci56LnBvaW50LCBERVRBSUxfWk9PTV9OVU0pO1xyXG59XHJcblxyXG4vKlxyXG4gKiBAZGVzY3JpcHRpb246IHpvb20gb3V0IHRvIHRoZSBpbml0aWFsIHN0YXRlIG9mIGdvb2dsZSBtYXBcclxuICogQHBhcmFtIG5vbmVcclxuICogQHJldHVybiB2b2lkXHJcbiAqICovXHJcbmZ1bmN0aW9uIHpvb21PdXQySW5pdFN0YXR1cygpe1xyXG4gICAgbWFwLnNldENlbnRlcihjZW50ZXIubG9jYXRpb24pO1xyXG4gICAgbWFwLnNldFpvb20oSU5JVF9aT09NX05VTSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hQbGFjZXMobWFya2VyLCBrZXlXb3Jkcyl7XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iXX0=
