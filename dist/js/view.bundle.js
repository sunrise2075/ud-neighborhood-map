function initMap(){map=new BMap.Map("map-canvas"),localSearch4Map=new BMap.LocalSearch(map,{renderOptions:{map:map}}),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.NavigationControl),map.addControl(new BMap.ScaleControl),map.addControl(new BMap.OverviewMapControl),map.addControl(new BMap.MapTypeControl),map.setCurrentCity(currentCity),map.enableScrollWheelZoom(),map.enableKeyboard(),geoLocations.forEach(function(e){addMarker(e)});var e=new BMap.Point(center.location.lng,center.location.lat);map.centerAndZoom(e,INIT_ZOOM_NUM),window.setTimeout(function(){map.panTo(e)},2e3)}function addMarker(e){var t=new BMap.Point(e.location.lng,e.location.lat),a=new BMap.Icon(e.icon,new BMap.Size(40,50)),o=new BMap.Marker(t,{title:e.title,icon:a});o.enableDragging(),o.addEventListener("click",function(e){openInfoWindow(o)}),map.addOverlay(o),markers.push(o)}function openInfoWindow(e,t,a){var o={width:250,height:100,title:e.z.title};infoWindow=new BMap.InfoWindow("World",o),map.openInfoWindow(infoWindow,e.z.point)}function showLocationDetail(e){var t="https://maps.googleapis.com/maps/api/geocode/json?latlng="+e.position.lat()+","+e.position.lng()+"&key="+MY_API_KEY;$.ajax({url:t}).done(function(e,t,a){console.log(e);var o="";if("OK"===e.status){var n=e.results[0].place_id;o+="<div>地址ID:"+n+"</div>";var l=e.results[0].formatted_address;o+="<div>详情:"+l+"</div>";var r=e.results[0].geometry;o+="<div>类型:"+r.location_type+"</div>",o+="<div>纬度:"+r.location.lat+"</div>",o+="<div>经度:"+r.location.lng+"</div>",infoWindow.setContent(o)}}).fail(function(e,t,a){console.log("textStatus:"+t+", errorThrown:"+a)}).always(function(e,t,a){console.log("ajax request to foursquare is completed, textStatus:"+t)})}function zoomIn2Marker(e){map.centerAndZoom(e.z.point,DETAIL_ZOOM_NUM)}function zoomOut2InitStatus(){map.setCenter(center.location),map.setZoom(INIT_ZOOM_NUM)}function searchPlaces(e,t){var a="http://api.map.baidu.com/place/v2/search?query=酒店$银行&scope=2&output=json&location="+e.z.point.lat+","+e.z.point.lng+"&radius=2000&filter=sort_name:distance|sort_rule:1&ak="+MY_API_KEY;$.ajax({url:a,dataType:"jsonp"}).done(function(e,t,a){var o=e.results;o.forEach(function(e){addMarker4NearByPlaces(e)})}).fail(function(e,t,a){console.log("textStatus:"+t+", errorThrown:"+a)}).always(function(e,t,a){console.log(" request to baidu api completed, textStatus:"+t)})}function addMarker4NearByPlaces(e){var t=new BMap.Point(e.location.lng,e.location.lat),a=new BMap.Marker(t,{title:e.name});a.enableDragging(),a.addEventListener("click",function(e){openInfoWindow(a)}),nearByPlaces.length=0,map.addOverlay(a),nearByPlaces.push(a)}var styles=[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"transit.station",stylers:[{weight:9},{hue:"#e85113"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]}],currentCity="深圳",map=null,localSearch4Map=null,markers=[],nearByPlaces=[],MY_API_KEY="HW1hgQNz18TYRRn7BjN6BOMALz6h5G1C",infoWindow=null,INIT_ZOOM_NUM=12,DETAIL_ZOOM_NUM=17;initMap();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC52aWV3LmpzIl0sIm5hbWVzIjpbImluaXRNYXAiLCJtYXAiLCJCTWFwIiwiTWFwIiwibG9jYWxTZWFyY2g0TWFwIiwiTG9jYWxTZWFyY2giLCJyZW5kZXJPcHRpb25zIiwiYWRkQ29udHJvbCIsIk5hdmlnYXRpb25Db250cm9sIiwiU2NhbGVDb250cm9sIiwiT3ZlcnZpZXdNYXBDb250cm9sIiwiTWFwVHlwZUNvbnRyb2wiLCJzZXRDdXJyZW50Q2l0eSIsImN1cnJlbnRDaXR5IiwiZW5hYmxlU2Nyb2xsV2hlZWxab29tIiwiZW5hYmxlS2V5Ym9hcmQiLCJnZW9Mb2NhdGlvbnMiLCJmb3JFYWNoIiwibG9jIiwiYWRkTWFya2VyIiwicG9pbnQiLCJQb2ludCIsImNlbnRlciIsImxvY2F0aW9uIiwibG5nIiwibGF0IiwiY2VudGVyQW5kWm9vbSIsIklOSVRfWk9PTV9OVU0iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwicGFuVG8iLCJteUljb24iLCJJY29uIiwiaWNvbiIsIlNpemUiLCJtYXJrZXIiLCJNYXJrZXIiLCJ0aXRsZSIsImVuYWJsZURyYWdnaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJvcGVuSW5mb1dpbmRvdyIsImFkZE92ZXJsYXkiLCJtYXJrZXJzIiwicHVzaCIsImNvbnRlbnQiLCJvcHRzIiwid2lkdGgiLCJoZWlnaHQiLCJ6IiwiaW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJzaG93TG9jYXRpb25EZXRhaWwiLCJ1cmwiLCJwb3NpdGlvbiIsIk1ZX0FQSV9LRVkiLCIkIiwiYWpheCIsImRvbmUiLCJkYXRhIiwidGV4dFN0YXR1cyIsImpxWGhyIiwiY29uc29sZSIsImxvZyIsImRldGFpbFN0cmluZyIsInN0YXR1cyIsInBsYWNlX2lkIiwicmVzdWx0cyIsImZvcm1hdHRlZF9hZGRyZXNzIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbl90eXBlIiwic2V0Q29udGVudCIsImZhaWwiLCJlcnJvclRocm93biIsImFsd2F5cyIsImpxWEhST3JEYXRhIiwianFYSFJPckVycm9yVGhyb3duIiwiem9vbUluMk1hcmtlciIsIkRFVEFJTF9aT09NX05VTSIsInpvb21PdXQySW5pdFN0YXR1cyIsInNldENlbnRlciIsInNldFpvb20iLCJzZWFyY2hQbGFjZXMiLCJrZXlXb3JkcyIsImRhdGFUeXBlIiwiaXRlbXMiLCJpdGVtIiwiYWRkTWFya2VyNE5lYXJCeVBsYWNlcyIsIm5hbWUiLCJuZWFyQnlQbGFjZXMiLCJsZW5ndGgiLCJzdHlsZXMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJjb2xvciIsImVsZW1lbnRUeXBlIiwid2VpZ2h0IiwibGlnaHRuZXNzIiwiaHVlIiwidmlzaWJpbGl0eSJdLCJtYXBwaW5ncyI6IkFBNkZBLFFBQUFBLFdBRUFDLElBQUEsR0FBQUMsTUFBQUMsSUFBQSxjQUVBQyxnQkFBQSxHQUFBRixNQUFBRyxZQUFBSixLQUNBSyxlQUFBTCxJQUFBQSxPQUdBQSxJQUFBTSxXQUFBLEdBQUFMLE1BQUFNLG1CQUNBUCxJQUFBTSxXQUFBLEdBQUFMLE1BQUFNLG1CQUNBUCxJQUFBTSxXQUFBLEdBQUFMLE1BQUFPLGNBQ0FSLElBQUFNLFdBQUEsR0FBQUwsTUFBQVEsb0JBQ0FULElBQUFNLFdBQUEsR0FBQUwsTUFBQVMsZ0JBQ0FWLElBQUFXLGVBQUFDLGFBQ0FaLElBQUFhLHdCQUNBYixJQUFBYyxpQkFNQUMsYUFBQUMsUUFBQSxTQUFBQyxHQUNBQyxVQUFBRCxJQUlBLElBQUFFLEdBQUEsR0FBQWxCLE1BQUFtQixNQUFBQyxPQUFBQyxTQUFBQyxJQUFBRixPQUFBQyxTQUFBRSxJQUNBeEIsS0FBQXlCLGNBQUFOLEVBQUFPLGVBQ0FDLE9BQUFDLFdBQUEsV0FDQTVCLElBQUE2QixNQUFBVixJQUNBLEtBT0EsUUFBQUQsV0FBQUQsR0FFQSxHQUFBRSxHQUFBLEdBQUFsQixNQUFBbUIsTUFBQUgsRUFBQUssU0FBQUMsSUFDQU4sRUFBQUssU0FBQUUsS0FFQU0sRUFBQSxHQUFBN0IsTUFBQThCLEtBQUFkLEVBQUFlLEtBQUEsR0FBQS9C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LGNBR0FGLFlBQUEsZUFDQUcsWUFBQSxrQkFDQUYsVUFDQUMsTUFBQSxZQUNBRyxXQUFBLE9BR0FMLFlBQUEsa0JBQ0FDLFVBQ0FHLE9BQUEsSUFDQUUsSUFBQSxjQUdBTixZQUFBLGVBQ0FHLFlBQUEsY0FDQUYsVUFDQU0sV0FBQSxVQUdBUCxZQUFBLFFBQ0FHLFlBQUEscUJBQ0FGLFVBQ0FJLFVBQUEsUUFHQUwsWUFBQSxRQUNBRyxZQUFBLG1CQUNBRixVQUNBSSxXQUFBLFFBR0FMLFlBQUEsTUFDQUcsWUFBQSxXQUNBRixVQUNBTSxXQUFBLE9BQ0FMLE1BQUEsY0FHQUYsWUFBQSxlQUNBRyxZQUFBLGdCQUNBRixVQUNBQyxNQUFBLFlBQ0FHLFdBQUEsT0FNQXBGLFlBQUEsS0FHQVosSUFBQSxLQUVBRyxnQkFBQSxLQUVBdUMsV0FFQThDLGdCQUdBbEMsV0FBQSxtQ0FHQUwsV0FBQSxLQUVBdkIsY0FBQSxHQUNBbUQsZ0JBQUEsRUFzQ0E5RSIsImZpbGUiOiJ2aWV3LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHN1bnJpc2UyMDc1IG9uIDIwMTcvMi8yNi5cclxuICovXHJcbi8vIENyZWF0ZSBhIHN0eWxlcyBhcnJheSB0byB1c2Ugd2l0aCB0aGUgbWFwLlxyXG52YXIgc3R5bGVzID0gW1xyXG4gICAge1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnd2F0ZXInLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBjb2xvcjogJyMxOWEwZDgnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ2FkbWluaXN0cmF0aXZlJyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2xhYmVscy50ZXh0LnN0cm9rZScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2ZmZmZmZicgfSxcclxuICAgICAgICAgICAgeyB3ZWlnaHQ6IDYgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAnYWRtaW5pc3RyYXRpdmUnLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLnRleHQuZmlsbCcsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2U4NTExMycgfVxyXG4gICAgICAgIF1cclxuICAgIH0se1xyXG4gICAgICAgIGZlYXR1cmVUeXBlOiAncm9hZC5oaWdod2F5JyxcclxuICAgICAgICBlbGVtZW50VHlwZTogJ2dlb21ldHJ5LnN0cm9rZScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IGNvbG9yOiAnI2VmZTllNCcgfSxcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IC00MCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd0cmFuc2l0LnN0YXRpb24nLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB3ZWlnaHQ6IDkgfSxcclxuICAgICAgICAgICAgeyBodWU6ICcjZTg1MTEzJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICdyb2FkLmhpZ2h3YXknLFxyXG4gICAgICAgIGVsZW1lbnRUeXBlOiAnbGFiZWxzLmljb24nLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyB2aXNpYmlsaXR5OiAnb2ZmJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd3YXRlcicsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5zdHJva2UnLFxyXG4gICAgICAgIHN0eWxlcnM6IFtcclxuICAgICAgICAgICAgeyBsaWdodG5lc3M6IDEwMCB9XHJcbiAgICAgICAgXVxyXG4gICAgfSx7XHJcbiAgICAgICAgZmVhdHVyZVR5cGU6ICd3YXRlcicsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdsYWJlbHMudGV4dC5maWxsJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgbGlnaHRuZXNzOiAtMTAwIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3BvaScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeScsXHJcbiAgICAgICAgc3R5bGVyczogW1xyXG4gICAgICAgICAgICB7IHZpc2liaWxpdHk6ICdvbicgfSxcclxuICAgICAgICAgICAgeyBjb2xvcjogJyNmMGU0ZDMnIH1cclxuICAgICAgICBdXHJcbiAgICB9LHtcclxuICAgICAgICBmZWF0dXJlVHlwZTogJ3JvYWQuaGlnaHdheScsXHJcbiAgICAgICAgZWxlbWVudFR5cGU6ICdnZW9tZXRyeS5maWxsJyxcclxuICAgICAgICBzdHlsZXJzOiBbXHJcbiAgICAgICAgICAgIHsgY29sb3I6ICcjZWZlOWU0JyB9LFxyXG4gICAgICAgICAgICB7IGxpZ2h0bmVzczogLTI1IH1cclxuICAgICAgICBdXHJcbiAgICB9XHJcbl07XHJcblxyXG4vL2N1cnJlbnQgY2l0eSBnb3IgQmFpRHUgbWFwXHJcbnZhciBjdXJyZW50Q2l0eSA9IFwi5rex5ZyzXCI7XHJcblxyXG4vL2NhY2hlIGdvb2dsZSBtYXAgb2JqZWN0IGFzIGdsb2JhbCB2YXJpYWJsZVxyXG52YXIgbWFwID0gbnVsbDtcclxuXHJcbnZhciBsb2NhbFNlYXJjaDRNYXAgPSBudWxsO1xyXG5cclxudmFyIG1hcmtlcnMgPSBbXTtcclxuXHJcbnZhciBuZWFyQnlQbGFjZXMgPSBbXTtcclxuXHJcbi8vIGNhY2hlIG15IGdvb2dsZSBtYXAgYXBpIGtleVxyXG52YXIgTVlfQVBJX0tFWSA9IFwiSFcxaGdRTnoxOFRZUlJuN0JqTjZCT01BTHo2aDVHMUNcIjtcclxuXHJcbi8vY2FjaGUgaW5mb1dpbmRvdyBvYmplY3QgYXMgZ2xvYmFsIHZhcmlhYmxlXHJcbnZhciBpbmZvV2luZG93ID0gbnVsbDtcclxuXHJcbnZhciBJTklUX1pPT01fTlVNID0gMTI7XHJcbnZhciBERVRBSUxfWk9PTV9OVU0gPSAxNztcclxuXHJcbi8vZ29vZ2xlIG1hcCBBUEkgY2FsbGJhY2sgZnVuY3Rpb25cclxuZnVuY3Rpb24gaW5pdE1hcCgpe1xyXG5cclxuICAgIG1hcCA9IG5ldyBCTWFwLk1hcChcIm1hcC1jYW52YXNcIik7IC8vIOWIm+W7uuWcsOWbvuWunuS+i1xyXG4gICAgLy/lop7liqDlnLDlm77mkJzntKLlip/og71cclxuICAgIGxvY2FsU2VhcmNoNE1hcCA9IG5ldyBCTWFwLkxvY2FsU2VhcmNoKG1hcCwge1xyXG4gICAgICAgIHJlbmRlck9wdGlvbnM6e21hcDogbWFwfVxyXG4gICAgfSk7XHJcbiAgICAvLyDnu7TlnLDlm77lop7liqDmjqfliLbnu4Tku7ZcclxuICAgIG1hcC5hZGRDb250cm9sKG5ldyBCTWFwLk5hdmlnYXRpb25Db250cm9sKCkpO1xyXG4gICAgbWFwLmFkZENvbnRyb2wobmV3IEJNYXAuTmF2aWdhdGlvbkNvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5TY2FsZUNvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5PdmVydmlld01hcENvbnRyb2woKSk7XHJcbiAgICBtYXAuYWRkQ29udHJvbChuZXcgQk1hcC5NYXBUeXBlQ29udHJvbCgpKTtcclxuICAgIG1hcC5zZXRDdXJyZW50Q2l0eShjdXJyZW50Q2l0eSk7IC8vIOS7heW9k+iuvue9ruWfjuW4guS/oeaBr+aXtu+8jE1hcFR5cGVDb250cm9s55qE5YiH5o2i5Yqf6IO95omN6IO95Y+v55SoXHJcbiAgICBtYXAuZW5hYmxlU2Nyb2xsV2hlZWxab29tKCk7Ly/lkK/liqjpvKDmoIfmu5rova7nvKnmlL7lnLDlm75cclxuICAgIG1hcC5lbmFibGVLZXlib2FyZCgpOy8v5ZCv5Yqo6ZSu55uY5pON5L2c5Zyw5Zu+XHJcblxyXG5cclxuICAgIC8v5Zyo5Zyw5Zu+5LiK6L+95Yqg5Zu+5qCHXHJcbiAgICAvLyB2YXIgbWFya2VyID0gbmV3IEJNYXAuTWFya2VyKHBvaW50KTtcclxuICAgIC8vXHJcbiAgICBnZW9Mb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihsb2Mpe1xyXG4gICAgICAgIGFkZE1hcmtlcihsb2MpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8g5L2/55So5Zyw54K555qE57uP5bqm5ZKM57qs5bqmLOWIm+W7uueCueWdkOagh1xyXG4gICAgdmFyIHBvaW50ID0gbmV3IEJNYXAuUG9pbnQoY2VudGVyLmxvY2F0aW9uLmxuZywgY2VudGVyLmxvY2F0aW9uLmxhdCk7XHJcbiAgICBtYXAuY2VudGVyQW5kWm9vbShwb2ludCwgSU5JVF9aT09NX05VTSk7XHJcbiAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIG1hcC5wYW5Ubyhwb2ludCk7XHJcbiAgICB9LCAyMDAwKTtcclxuXHJcblxyXG59XHJcblxyXG5pbml0TWFwKCk7XHJcblxyXG5mdW5jdGlvbiBhZGRNYXJrZXIobG9jKXtcclxuICAgIC8vIOWQkeWcsOWbvua3u+WKoOagh+azqFxyXG4gICAgdmFyIHBvaW50ID0gbmV3IEJNYXAuUG9pbnQobG9jLmxvY2F0aW9uLmxuZyxcclxuICAgICAgICBsb2MubG9jYXRpb24ubGF0KTtcclxuICAgIC8vIOWIm+W7uuagh+azqOWvueixoeW5tua3u+WKoOWIsOWcsOWbvlxyXG4gICAgdmFyIG15SWNvbiA9IG5ldyBCTWFwLkljb24obG9jLmljb24sIG5ldyBCTWFwLlNpemUoNDAsIDUwKSk7XHJcbiAgICB2YXIgbWFya2VyID0gbmV3IEJNYXAuTWFya2VyKHBvaW50LCB7XHJcbiAgICAgICAgdGl0bGU6IGxvYy50aXRsZSxcclxuICAgICAgICBpY29uOiBteUljb25cclxuICAgIH0pO1xyXG4gICAgbWFya2VyLmVuYWJsZURyYWdnaW5nKCk7XHJcbiAgICBtYXJrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIG9wZW5JbmZvV2luZG93KG1hcmtlcik7XHJcbiAgICB9KVxyXG4gICAgLy8gbWFya2VyLnNldEFuaW1hdGlvbihCTUFQX0FOSU1BVElPTl9EUk9QKTsvL+i3s+WKqOeahOWKqOeUu1xyXG4gICAgbWFwLmFkZE92ZXJsYXkobWFya2VyKTtcclxuICAgIG1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG59XHJcblxyXG4vKlxyXG4qIEBkZXNjcmlwdGlvbjogb3BlbiBpbmZvIHdpbmRvdyBmb3JcclxuKiAgICAgICAgICAgICAgdGhlIGdpdmVuIGdvb2dsZSBtYXAgbWFya2VyXHJcbiogQHBhcmFtICBtYXJrZXIgdGhlIG9iamVjdCBvZiBtYXJrZXJcclxuKiBAcGFyYW0gdGl0bGVcclxuKiBAcGFyYW0gY29udGVudFxyXG4qIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIG9wZW5JbmZvV2luZG93KG1hcmtlciwgdGl0bGUsIGNvbnRlbnQpe1xyXG4gICAgLy9jcmVhdGUgYW4gaW5mbyB3aW5kb3cgb2JqZWN0XHJcbiAgICAvL29yIHNldCBjb250ZW50IG9uIHRoZSBleGlzdGluZyBpbmZvIHdpbmRvd1xyXG4gICAgLy93ZSBuZWVkbid0IGNyZWF0ZSBpbmZvIHdpbmRvdyBvYmplY3QgcmVwZWF0ZWRseVxyXG4gICAgdmFyIG9wdHMgPSB7XHJcbiAgICAgICAgd2lkdGggOiAyNTAsICAgICAvLyDkv6Hmga/nqpflj6Plrr3luqZcclxuICAgICAgICBoZWlnaHQ6IDEwMCwgICAgIC8vIOS/oeaBr+eql+WPo+mrmOW6plxyXG4gICAgICAgIHRpdGxlIDogbWFya2VyLnoudGl0bGUgIC8vIOS/oeaBr+eql+WPo+agh+mimFxyXG4gICAgfVxyXG4gICAgaW5mb1dpbmRvdyA9IG5ldyBCTWFwLkluZm9XaW5kb3coXCJXb3JsZFwiLCBvcHRzKTsgIC8vIOWIm+W7uuS/oeaBr+eql+WPo+WvueixoVxyXG5cclxuICAgIG1hcC5vcGVuSW5mb1dpbmRvdyhpbmZvV2luZG93LCBtYXJrZXIuei5wb2ludCk7ICAgICAgLy8g5omT5byA5L+h5oGv56qX5Y+jXHJcblxyXG5cclxufVxyXG5cclxuXHJcbi8qXHJcbiAqIEBkZXNjcmlwdGlvbjogcXVlcnkgZGV0YWlsZWQgaW5mb3JtYXRpb25cclxuICogZm9yIHRoZSBnaXZlbiBtYXJrZXIgYW5kIHNldCBjb250ZW50IGZvclxyXG4gKiBjdXJyZW50IGluZm8gd2luZG93XHJcbiAqIEBwYXJhbSAgbWFya2VyIHRoZSBvYmplY3Qgb2YgbWFya2VyXHJcbiAqIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIHNob3dMb2NhdGlvbkRldGFpbChtYXJrZXIpe1xyXG5cclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/bGF0bG5nPVwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubGF0KCkgK1xyXG4gICAgICAgIFwiLFwiICtcclxuICAgICAgICBtYXJrZXIucG9zaXRpb24ubG5nKCkgK1xyXG4gICAgICAgIFwiJmtleT1cIiArXHJcbiAgICAgICAgTVlfQVBJX0tFWTtcclxuXHJcbiAgICAvL21ha2UgYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgYXBpXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybCA6IHVybFxyXG4gICAgICAgIC8vZG8gcmVzcG9uc2Ugc3VjY2VzcyBoYW5kbGluZ1xyXG4gICAgfSkuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhocil7XHJcbiAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgIHZhciBkZXRhaWxTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgaWYoZGF0YS5zdGF0dXMgPT09IFwiT0tcIil7XHJcbiAgICAgICAgICAgIHZhciBwbGFjZV9pZCA9IGRhdGEucmVzdWx0c1swXS5wbGFjZV9pZDtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2PuWcsOWdgElEOlwiICsgcGxhY2VfaWQgKyBcIjwvZGl2PlwiO1xyXG5cclxuICAgICAgICAgICB2YXIgZm9ybWF0dGVkX2FkZHJlc3MgPSBkYXRhLnJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3M7XHJcbiAgICAgICAgICAgZGV0YWlsU3RyaW5nICs9IFwiPGRpdj7or6bmg4U6XCIgKyBmb3JtYXR0ZWRfYWRkcmVzcyArIFwiPC9kaXY+XCI7XHJcblxyXG4gICAgICAgICAgIHZhciBnZW9tZXRyeSA9IGRhdGEucmVzdWx0c1swXS5nZW9tZXRyeTtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Puexu+WeizpcIiArIGdlb21ldHJ5LmxvY2F0aW9uX3R5cGUgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgIGRldGFpbFN0cmluZyArPSBcIjxkaXY+57qs5bqmOlwiICsgZ2VvbWV0cnkubG9jYXRpb24ubGF0ICsgXCI8L2Rpdj5cIjtcclxuICAgICAgICAgICBkZXRhaWxTdHJpbmcgKz0gXCI8ZGl2Pue7j+W6pjpcIiArIGdlb21ldHJ5LmxvY2F0aW9uLmxuZyArIFwiPC9kaXY+XCI7XHJcbiAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGRldGFpbFN0cmluZyk7XHJcbiAgICAgICB9XHJcbiAgICAgICAgLy9kbyByZXNwb25zZSBlcnJvciBoYW5kbGluZ1xyXG4gICAgfSkuZmFpbChmdW5jdGlvbihqcVhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcInRleHRTdGF0dXM6XCIgKyB0ZXh0U3RhdHVzICsgXCIsIGVycm9yVGhyb3duOlwiICtlcnJvclRocm93bik7XHJcbiAgICAgICAgLy9kbyBhamF4IGxvZ2dpbmcgb24gdGhlIGJyb3dzZXIgY29uc29sZVxyXG4gICAgfSkuYWx3YXlzIChmdW5jdGlvbihqcVhIUk9yRGF0YSwgdGV4dFN0YXR1cywganFYSFJPckVycm9yVGhyb3duKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coIFwiYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgaXMgY29tcGxldGVkLCB0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLypcclxuKiBAZGVzY3JpcHRpb246IHpvb20gaW4gYW5kIHNldCBjZW50ZXIgb2YgdGhlIG1hcFxyXG4qIEBwYXJhbSBtYXJrZXIgdGhlIGdpdmVuIG1hcmtlclxyXG4qIEByZXR1cm4gdm9pZFxyXG4qICovXHJcbmZ1bmN0aW9uIHpvb21JbjJNYXJrZXIobWFya2VyKXtcclxuICAgIG1hcC5jZW50ZXJBbmRab29tKG1hcmtlci56LnBvaW50LCBERVRBSUxfWk9PTV9OVU0pO1xyXG59XHJcblxyXG4vKlxyXG4gKiBAZGVzY3JpcHRpb246IHpvb20gb3V0IHRvIHRoZSBpbml0aWFsIHN0YXRlIG9mIGdvb2dsZSBtYXBcclxuICogQHBhcmFtIG5vbmVcclxuICogQHJldHVybiB2b2lkXHJcbiAqICovXHJcbmZ1bmN0aW9uIHpvb21PdXQySW5pdFN0YXR1cygpe1xyXG4gICAgbWFwLnNldENlbnRlcihjZW50ZXIubG9jYXRpb24pO1xyXG4gICAgbWFwLnNldFpvb20oSU5JVF9aT09NX05VTSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzZWFyY2hQbGFjZXMobWFya2VyLCBrZXlXb3Jkcyl7XHJcblxyXG4gICAgdmFyIHVybCA9IFwiaHR0cDovL2FwaS5tYXAuYmFpZHUuY29tL3BsYWNlL3YyL3NlYXJjaD9xdWVyeT3phZLlupck6ZO26KGMJnNjb3BlPTImb3V0cHV0PWpzb24mbG9jYXRpb249XCJcclxuICAgICAgICArIG1hcmtlci56LnBvaW50LmxhdFxyXG4gICAgICAgICsgXCIsXCJcclxuICAgICAgICArIG1hcmtlci56LnBvaW50LmxuZyArXHJcbiAgICAgICAgXCImcmFkaXVzPTIwMDAmZmlsdGVyPXNvcnRfbmFtZTpkaXN0YW5jZXxzb3J0X3J1bGU6MSZhaz1cIlxyXG4gICAgICAgICsgTVlfQVBJX0tFWTtcclxuXHJcbiAgICAvL21ha2UgYWpheCByZXF1ZXN0IHRvIGZvdXJzcXVhcmUgYXBpXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHVybCA6IHVybCxcclxuICAgICAgICBkYXRhVHlwZSA6IFwianNvbnBcIixcclxuICAgICAgICAvL2RvIHJlc3BvbnNlIHN1Y2Nlc3MgaGFuZGxpbmdcclxuICAgIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywganFYaHIpe1xyXG4gICAgICAgIHZhciBpdGVtcyA9IGRhdGEucmVzdWx0cztcclxuXHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcclxuICAgICAgICAgICAgYWRkTWFya2VyNE5lYXJCeVBsYWNlcyhpdGVtKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vZG8gcmVzcG9uc2UgZXJyb3IgaGFuZGxpbmdcclxuICAgIH0pLmZhaWwoZnVuY3Rpb24oanFYaHIsIHRleHRTdGF0dXMsIGVycm9yVGhyb3duKXtcclxuICAgICAgICBjb25zb2xlLmxvZyggXCJ0ZXh0U3RhdHVzOlwiICsgdGV4dFN0YXR1cyArIFwiLCBlcnJvclRocm93bjpcIiArZXJyb3JUaHJvd24pO1xyXG4gICAgICAgIC8vZG8gYWpheCBsb2dnaW5nIG9uIHRoZSBicm93c2VyIGNvbnNvbGVcclxuICAgIH0pLmFsd2F5cyAoZnVuY3Rpb24oanFYSFJPckRhdGEsIHRleHRTdGF0dXMsIGpxWEhST3JFcnJvclRocm93bikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCBcIiByZXF1ZXN0IHRvIGJhaWR1IGFwaSBjb21wbGV0ZWQsIHRleHRTdGF0dXM6XCIgKyB0ZXh0U3RhdHVzKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRNYXJrZXI0TmVhckJ5UGxhY2VzKGl0ZW0pe1xyXG4gICAgLy8g5ZCR5Zyw5Zu+5re75Yqg5qCH5rOoXHJcbiAgICB2YXIgcG9pbnQgPSBuZXcgQk1hcC5Qb2ludChpdGVtLmxvY2F0aW9uLmxuZyxcclxuICAgICAgICBpdGVtLmxvY2F0aW9uLmxhdCk7XHJcbiAgICAvLyDliJvlu7rmoIfms6jlr7nosaHlubbmt7vliqDliLDlnLDlm75cclxuICAgIC8vIHZhciBteUljb24gPSBuZXcgQk1hcC5JY29uKGxvYy5pY29uLCBuZXcgQk1hcC5TaXplKDQwLCA1MCkpO1xyXG4gICAgdmFyIG1hcmtlciA9IG5ldyBCTWFwLk1hcmtlcihwb2ludCwge1xyXG4gICAgICAgIHRpdGxlOiBpdGVtLm5hbWVcclxuICAgIH0pO1xyXG4gICAgbWFya2VyLmVuYWJsZURyYWdnaW5nKCk7XHJcbiAgICBtYXJrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIG9wZW5JbmZvV2luZG93KG1hcmtlcik7XHJcbiAgICB9KTtcclxuICAgIG5lYXJCeVBsYWNlcy5sZW5ndGggPSAwO1xyXG4gICAgbWFwLmFkZE92ZXJsYXkobWFya2VyKTtcclxuICAgIG5lYXJCeVBsYWNlcy5wdXNoKG1hcmtlcik7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
